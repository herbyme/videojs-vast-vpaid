(function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var u=typeof require=="function"&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}var a=typeof require=="function"&&require;for(var s=0;s<n.length;s++)r(n[s]);return r})({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=i.IVPAIDAdUnit=function(){function e(){r(this,e)}n(e,[{key:"handshakeVersion",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"2.0";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined}},{key:"initAd",value:function i(e,t,n,r){var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{AdParameters:""};var s=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{flashVars:""};var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:undefined}},{key:"resizeAd",value:function a(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined}},{key:"startAd",value:function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined}},{key:"stopAd",value:function o(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined}},{key:"pauseAd",value:function u(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined}},{key:"resumeAd",value:function l(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined}},{key:"expandAd",value:function c(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined}},{key:"collapseAd",value:function d(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined}},{key:"skipAd",value:function f(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined}},{key:"getAdLinear",value:function h(e){}},{key:"getAdWidth",value:function p(e){}},{key:"getAdHeight",value:function v(e){}},{key:"getAdExpanded",value:function g(e){}},{key:"getAdSkippableState",value:function y(e){}},{key:"getAdRemainingTime",value:function m(e){}},{key:"getAdDuration",value:function A(e){}},{key:"setAdVolume",value:function k(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined}},{key:"getAdVolume",value:function _(e){}},{key:"getAdCompanions",value:function w(e){}},{key:"getAdIcons",value:function T(e){}}]);return e}();Object.defineProperty(a,"EVENTS",{writable:false,configurable:false,value:["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]})},{}],2:[function(e,t,i){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&((typeof t==="undefined"?"undefined":n(t))==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":n(t)))}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e("./IVPAIDAdUnit").IVPAIDAdUnit;var l=Object.getOwnPropertyNames(u.prototype).filter(function(e){return["constructor"].indexOf(e)===-1});var c=i.VPAIDAdUnit=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i._destroyed=false;i._flash=e;return i}r(t,[{key:"_destroy",value:function i(){var e=this;this._destroyed=true;l.forEach(function(t){e._flash.removeCallbackByMethodName(t)});u.EVENTS.forEach(function(t){e._flash.offEvent(t)});this._flash=null}},{key:"isDestroyed",value:function n(){return this._destroyed}},{key:"on",value:function c(e,t){this._flash.on(e,t)}},{key:"off",value:function d(e,t){this._flash.off(e,t)}},{key:"handshakeVersion",value:function f(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"2.0";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;this._flash.callFlashMethod("handshakeVersion",[e],t)}},{key:"initAd",value:function h(e,t,i,n){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{AdParameters:""};var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{flashVars:""};var s=arguments.length>6&&arguments[6]!==undefined?arguments[6]:undefined;this._flash.setSize(e,t);r=r||{AdParameters:""};a=a||{flashVars:""};this._flash.callFlashMethod("initAd",[this._flash.getWidth(),this._flash.getHeight(),i,n,r.AdParameters||"",a.flashVars||""],s)}},{key:"resizeAd",value:function p(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;this._flash.setSize(e,t);this._flash.callFlashMethod("resizeAd",[this._flash.getWidth(),this._flash.getHeight(),i],n)}},{key:"startAd",value:function v(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this._flash.callFlashMethod("startAd",[],e)}},{key:"stopAd",value:function g(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this._flash.callFlashMethod("stopAd",[],e)}},{key:"pauseAd",value:function y(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this._flash.callFlashMethod("pauseAd",[],e)}},{key:"resumeAd",value:function m(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this._flash.callFlashMethod("resumeAd",[],e)}},{key:"expandAd",value:function A(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this._flash.callFlashMethod("expandAd",[],e)}},{key:"collapseAd",value:function k(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this._flash.callFlashMethod("collapseAd",[],e)}},{key:"skipAd",value:function _(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this._flash.callFlashMethod("skipAd",[],e)}},{key:"getAdLinear",value:function w(e){this._flash.callFlashMethod("getAdLinear",[],e)}},{key:"getAdWidth",value:function T(e){this._flash.callFlashMethod("getAdWidth",[],e)}},{key:"getAdHeight",value:function b(e){this._flash.callFlashMethod("getAdHeight",[],e)}},{key:"getAdExpanded",value:function E(e){this._flash.callFlashMethod("getAdExpanded",[],e)}},{key:"getAdSkippableState",value:function S(e){this._flash.callFlashMethod("getAdSkippableState",[],e)}},{key:"getAdRemainingTime",value:function V(e){this._flash.callFlashMethod("getAdRemainingTime",[],e)}},{key:"getAdDuration",value:function C(e){this._flash.callFlashMethod("getAdDuration",[],e)}},{key:"setAdVolume",value:function I(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;this._flash.callFlashMethod("setAdVolume",[e],t)}},{key:"getAdVolume",value:function L(e){this._flash.callFlashMethod("getAdVolume",[],e)}},{key:"getAdCompanions",value:function F(e){this._flash.callFlashMethod("getAdCompanions",[],e)}},{key:"getAdIcons",value:function U(e){this._flash.callFlashMethod("getAdIcons",[],e)}}]);return t}(u)},{"./IVPAIDAdUnit":1}],3:[function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=e("swfobject");var s=e("./jsFlashBridge").JSFlashBridge;var o=e("./VPAIDAdUnit").VPAIDAdUnit;var u=e("./utils").noop;var l=e("./utils").callbackTimeout;var c=e("./utils").isPositiveInt;var d=e("./utils").createElementWithID;var f=e("./utils").unique("vpaid");var h=e("./flashTester.js").createFlashTester;var p="error";var v="10.1.0";var g={isSupported:function _(){return true}};var y=function(){function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{data:"VPAIDFlash.swf",width:800,height:400};var o=this;var h=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{wmode:"transparent",salign:"tl",align:"left",allowScriptAccess:"always",scale:"noScale",allowFullScreen:"true",quality:"high"};var p=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{debug:false,timeout:1e4};r(this,e);var g=this;this._vpaidParentEl=t;this._flashID=f();this._destroyed=false;i=i||u;n.width=c(n.width,800);n.height=c(n.height,400);d(t,this._flashID,true);h.movie=n.data;h.FlashVars="flashid="+this._flashID+"&handler="+s.VPAID_FLASH_HANDLER+"&debug="+p.debug+"&salign="+h.salign;if(!e.isSupported()){return m("user don't support flash or doesn't have the minimum required version of flash "+v)}this.el=a.createSWF(n,h,this._flashID);if(!this.el){return m("swfobject failed to create object in element")}var y=l(p.timeout,function(e,t){A.call(o);i(e,t)},function(){i("vpaid flash load timeout "+p.timeout)});this._flash=new s(this.el,n.data,this._flashID,n.width,n.height,y);function m(e){setTimeout(function(){i(new Error(e))},0);return g}}n(e,[{key:"destroy",value:function t(){this._destroyAdUnit();if(this._flash){this._flash.destroy();this._flash=null}this.el=null;this._destroyed=true}},{key:"isDestroyed",value:function i(){return this._destroyed}},{key:"_destroyAdUnit",value:function h(){delete this._loadLater;if(this._adUnitLoad){this._adUnitLoad=null;this._flash.removeCallback(this._adUnitLoad)}if(this._adUnit){this._adUnit._destroy();this._adUnit=null}}},{key:"loadAdUnit",value:function p(e,t){var i=this;m.call(this);if(this._adUnit){this._destroyAdUnit()}if(this._flash.isReady()){this._adUnitLoad=function(e,n){if(!e){i._adUnit=new o(i._flash)}i._adUnitLoad=null;t(e,i._adUnit)};this._flash.callFlashMethod("loadAdUnit",[e],this._adUnitLoad)}else{this._loadLater={url:e,callback:t}}}},{key:"unloadAdUnit",value:function g(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;m.call(this);this._destroyAdUnit();this._flash.callFlashMethod("unloadAdUnit",[],e)}},{key:"getFlashID",value:function y(){m.call(this);return this._flash.getFlashID()}},{key:"getFlashURL",value:function k(){m.call(this);return this._flash.getFlashURL()}}]);return e}();k("isSupported",function(){return a.hasFlashPlayerVersion(v)&&g.isSupported()},true);k("runFlashTest",function(e){g=h(document.body,e)});function m(){if(this._destroyed){throw new Error("VPAIDFlashToJS is destroyed!")}}function A(){if(this._loadLater){this.loadAdUnit(this._loadLater.url,this._loadLater.callback);delete this._loadLater}}function k(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;Object.defineProperty(y,e,{writable:i,configurable:false,value:t})}y.swfobject=a;t.exports=y},{"./VPAIDAdUnit":2,"./flashTester.js":4,"./jsFlashBridge":5,"./utils":8,swfobject:14}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=e("swfobject");var s="vpaid_video_flash_tester";var o="vpaid_video_flash_tester_el";var u=e("./jsFlashBridge").JSFlashBridge;var l=e("./utils");var c=e("./registry").MultipleValuesRegistry;var d=function(){function e(t){var i=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{data:"VPAIDFlash.swf",width:800,height:400};r(this,e);this.parentEl=l.createElementWithID(t,o);l.hideFlashEl(this.parentEl);var s={};s.movie=n.data;s.FlashVars="flashid="+o+"&handler="+u.VPAID_FLASH_HANDLER;s.allowScriptAccess="always";this.el=a.createSWF(n,s,o);this._handlers=new c;this._isSupported=false;if(this.el){l.hideFlashEl(this.el);this._flash=new u(this.el,n.data,o,n.width,n.height,function(){var e=true;i._isSupported=e;i._handlers.get("change").forEach(function(t){setTimeout(function(){t("change",e)},0)})})}}n(e,[{key:"isSupported",value:function t(){return this._isSupported}},{key:"on",value:function i(e,t){this._handlers.add(e,t)}}]);return e}();var f=i.createFlashTester=function h(e,t){if(!window[s]){window[s]=new d(e,t)}return window[s]}},{"./jsFlashBridge":5,"./registry":7,"./utils":8,swfobject:14}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=e("./utils").unique;var s=e("./utils").isPositiveInt;var o=e("./utils").stringEndsWith;var u=e("./registry").SingleValueRegistry;var l=e("./registry").MultipleValuesRegistry;var c=e("./jsFlashBridgeRegistry");var d="vpaid_video_flash_handler";var f="AdError";var h=i.JSFlashBridge=function(){function e(t,i,n,s,o,d){r(this,e);this._el=t;this._flashID=n;this._flashURL=i;this._width=s;this._height=o;this._handlers=new l;this._callbacks=new u;this._uniqueMethodIdentifier=a(this._flashID);this._ready=false;this._handShakeHandler=d;c.addInstance(this._flashID,this)}n(e,[{key:"on",value:function t(e,i){this._handlers.add(e,i)}},{key:"off",value:function i(e,t){return this._handlers.remove(e,t)}},{key:"offEvent",value:function d(e){return this._handlers.removeByKey(e)}},{key:"offAll",value:function h(){return this._handlers.removeAll()}},{key:"callFlashMethod",value:function v(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;var n="";if(i){n=this._uniqueMethodIdentifier()+"_"+e;this._callbacks.add(n,i)}try{this._el[e]([n].concat(t))}catch(r){if(i){p.call(this,n,r)}else{this._trigger(f,r)}}}},{key:"removeCallback",value:function g(e){return this._callbacks.removeByValue(e)}},{key:"removeCallbackByMethodName",value:function y(e){var t=this;this._callbacks.filterKeys(function(t){return o(t,e)}).forEach(function(e){t._callbacks.remove(e)})}},{key:"removeAllCallbacks",value:function m(){return this._callbacks.removeAll()}},{key:"_trigger",value:function A(e,t){var i=this;this._handlers.get(e).forEach(function(n){if(e==="AdClickThru"){n(t)}else{setTimeout(function(){if(i._handlers.get(e).length>0){n(t)}},0)}})}},{key:"_callCallback",value:function k(e,t,i,n){var r=this._callbacks.get(t);if(!r){if(i&&t===""){this.trigger(f,i)}return}p.call(this,t,i,n)}},{key:"_handShake",value:function _(e,t){this._ready=true;if(this._handShakeHandler){this._handShakeHandler(e,t);delete this._handShakeHandler}}},{key:"getSize",value:function w(){return{width:this._width,height:this._height}}},{key:"setSize",value:function T(e,t){this._width=s(e,this._width);this._height=s(t,this._height);this._el.setAttribute("width",this._width);this._el.setAttribute("height",this._height)}},{key:"getWidth",value:function b(){return this._width}},{key:"setWidth",value:function E(e){this.setSize(e,this._height)}},{key:"getHeight",value:function S(){return this._height}},{key:"setHeight",value:function V(e){this.setSize(this._width,e)}},{key:"getFlashID",value:function C(){return this._flashID}},{key:"getFlashURL",value:function I(){return this._flashURL}},{key:"isReady",value:function L(){return this._ready}},{key:"destroy",value:function F(){this.offAll();this.removeAllCallbacks();c.removeInstanceByID(this._flashID);if(this._el.parentElement){this._el.parentElement.removeChild(this._el)}}}]);return e}();function p(e,t,i){var n=this;setTimeout(function(){var r=n._callbacks.get(e);if(r){n._callbacks.remove(e);r(t,i)}},0)}Object.defineProperty(h,"VPAID_FLASH_HANDLER",{writable:false,configurable:false,value:d});window[d]=function(e,t,i,n,r,a){var s=c.getInstanceByID(e);if(!s)return;if(i==="handShake"){s._handShake(r,a)}else{if(t!=="event"){s._callCallback(i,n,r,a)}else{s._trigger(i,a)}}}},{"./jsFlashBridgeRegistry":6,"./registry":7,"./utils":8}],6:[function(e,t,i){"use strict";var n=e("./registry").SingleValueRegistry;var r=new n;var a={};Object.defineProperty(a,"addInstance",{writable:false,configurable:false,value:function s(e,t){r.add(e,t)}});Object.defineProperty(a,"getInstanceByID",{writable:false,configurable:false,value:function o(e){return r.get(e)}});Object.defineProperty(a,"removeInstanceByID",{writable:false,configurable:false,value:function u(e){return r.remove(e)}});t.exports=a},{"./registry":7}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=i.MultipleValuesRegistry=function(){function e(){r(this,e);this._registries={}}n(e,[{key:"add",value:function t(e,i){if(!this._registries[e]){this._registries[e]=[]}if(this._registries[e].indexOf(i)===-1){this._registries[e].push(i)}}},{key:"get",value:function i(e){return this._registries[e]||[]}},{key:"filterKeys",value:function a(e){return Object.keys(this._registries).filter(e)}},{key:"findByValue",value:function s(e){var t=this;var i=Object.keys(this._registries).filter(function(i){return t._registries[i].indexOf(e)!==-1});return i}},{key:"remove",value:function o(e,t){if(!this._registries[e]){return}var i=this._registries[e].indexOf(t);if(i<0){return}return this._registries[e].splice(i,1)}},{key:"removeByKey",value:function u(e){var t=this._registries[e];delete this._registries[e];return t}},{key:"removeByValue",value:function l(e){var t=this;var i=this.findByValue(e);return i.map(function(i){return t.remove(i,e)})}},{key:"removeAll",value:function c(){var e=this._registries;this._registries={};return e}},{key:"size",value:function d(){return Object.keys(this._registries).length}}]);return e}();var s=i.SingleValueRegistry=function(){function e(){r(this,e);this._registries={}}n(e,[{key:"add",value:function t(e,i){this._registries[e]=i}},{key:"get",value:function i(e){return this._registries[e]}},{key:"filterKeys",value:function a(e){return Object.keys(this._registries).filter(e)}},{key:"findByValue",value:function s(e){var t=this;var i=Object.keys(this._registries).filter(function(i){return t._registries[i]===e});return i}},{key:"remove",value:function o(e){var t=this._registries[e];delete this._registries[e];return t}},{key:"removeByValue",value:function u(e){var t=this;var i=this.findByValue(e);return i.map(function(e){return t.remove(e)})}},{key:"removeAll",value:function l(){var e=this._registries;this._registries={};return e}},{key:"size",value:function c(){return Object.keys(this._registries).length}}]);return e}()},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.unique=n;i.noop=r;i.callbackTimeout=a;i.createElementWithID=s;i.isPositiveInt=o;i.stringEndsWith=l;i.hideFlashEl=c;function n(e){var t=-1;return function(i){return e+"_"+ ++t}}function r(){}function a(e,t,i){var n=setTimeout(function(){t=r;i()},e);return function(){clearTimeout(n);t.apply(this,arguments)}}function s(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=document.createElement("div");n.id=t;if(i){e.innerHTML=""}e.appendChild(n);return n}function o(e,t){return!isNaN(parseFloat(e))&&isFinite(e)&&e>0?e:t}var u=function(){if(String.prototype.endsWith)return String.prototype.endsWith;return function e(t,i){var n=this.toString();if(i===undefined||i>n.length){i=n.length}i-=t.length;var r=n.indexOf(t,i);return r!==-1&&r===i}}();function l(e,t){return u.call(e,t)}function c(e){e.style.position="absolute";e.style.left="-1px";e.style.top="-1px";e.style.width="1px";e.style.height="1px"}},{}],9:[function(e,t,i){"use strict";var n=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];var r=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"];var a=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"];var s=["setAdVolume"];function o(e,t,i){}o.prototype.handshakeVersion=function(e,t){};o.prototype.initAd=function(e,t,i,n,r,a,s){};o.prototype.startAd=function(e){};o.prototype.stopAd=function(e){};o.prototype.skipAd=function(e){};o.prototype.resizeAd=function(e,t,i,n){};o.prototype.pauseAd=function(e){};o.prototype.resumeAd=function(e){};o.prototype.expandAd=function(e){};o.prototype.collapseAd=function(e){};o.prototype.subscribe=function(e,t,i){};o.prototype.unsubscribe=function(e,t){};o.prototype.getAdLinear=function(e){};o.prototype.getAdWidth=function(e){};o.prototype.getAdHeight=function(e){};o.prototype.getAdExpanded=function(e){};o.prototype.getAdSkippableState=function(e){};o.prototype.getAdRemainingTime=function(e){};o.prototype.getAdDuration=function(e){};o.prototype.getAdVolume=function(e){};o.prototype.getAdCompanions=function(e){};o.prototype.getAdIcons=function(e){};o.prototype.setAdVolume=function(e,t){};l(o,"METHODS",n);l(o,"GETTERS",a);l(o,"SETTERS",s);l(o,"EVENTS",r);var u=n.filter(function(e){return["skipAd"].indexOf(e)===-1});l(o,"checkVPAIDInterface",function c(e){var t=u.every(function(t){return typeof e[t]==="function"});return t});t.exports=o;function l(e,t,i){Object.defineProperty(e,t,{writable:false,configurable:false,value:i})}},{}],10:[function(e,t,i){"use strict";var n=e("./IVPAIDAdUnit");var r=e("./subscriber");var a=n.checkVPAIDInterface;var s=e("./utils");var o=n.METHODS;var u="AdError";var l="AdClickThru";var c=n.EVENTS.filter(function(e){return e!=l});function d(e,t,i,n){this._isValid=a(e);if(this._isValid){this._creative=e;this._el=t;this._videoEl=i;this._iframe=n;this._subscribers=new r;s.setFullSizeStyle(t);f.call(this)}}d.prototype=Object.create(n.prototype);d.prototype.isValidVPAIDAd=function g(){return this._isValid};n.METHODS.forEach(function(e){var t=["subscribe","unsubscribe","initAd"];if(t.indexOf(e)!==-1)return;d.prototype[e]=function(){var t=n.prototype[e].length;var i=Array.prototype.slice.call(arguments);var r=t===i.length?i.pop():undefined;setTimeout(function(){var t,n=null;try{t=this._creative[e].apply(this._creative,i)}catch(a){n=a}v(r,this._subscribers,n,t)}.bind(this),0)}});d.prototype.initAd=function y(e,t,i,n,r,a,o){r=r||{};a=s.extend({slot:this._el,videoSlot:this._videoEl},a||{});setTimeout(function(){var s;try{this._creative.initAd(e,t,i,n,r,a)}catch(u){s=u}v(o,this._subscribers,s)}.bind(this),0)};d.prototype.subscribe=function m(e,t,i){this._subscribers.subscribe(t,e,i)};d.prototype.unsubscribe=function A(e,t){this._subscribers.unsubscribe(t,e)};d.prototype.on=d.prototype.subscribe;d.prototype.off=d.prototype.unsubscribe;n.GETTERS.forEach(function(e){d.prototype[e]=function(t){setTimeout(function(){var i,n=null;try{i=this._creative[e]()}catch(r){n=r}v(t,this._subscribers,n,i)}.bind(this),0)}});d.prototype.setAdVolume=function k(e,t){setTimeout(function(){var i,n=null;try{this._creative.setAdVolume(e);i=this._creative.getAdVolume()}catch(r){n=r}if(!n){n=s.validate(i===e,"failed to apply volume: "+e)}v(t,this._subscribers,n,i)}.bind(this),0)};d.prototype._destroy=function _(){this.stopAd();this._subscribers.unsubscribeAll()};function f(){c.forEach(function(e){this._creative.subscribe(p.bind(this,e),e)}.bind(this));this._creative.subscribe(h.bind(this),l);if(this._videoEl){var e=this._iframe.contentDocument.documentElement;var t=this._videoEl;e.addEventListener("click",function(i){if(i.target===e){t.click()}})}}function h(e,t,i){this._subscribers.triggerSync(l,{url:e,id:t,playerHandles:i})}function p(e){this._subscribers.trigger(e,Array.prototype.slice(arguments,1))}function v(e,t,i,n){if(e){e(i,n)}else if(i){t.trigger(u,i)}}t.exports=d},{"./IVPAIDAdUnit":9,"./subscriber":12,"./utils":13}],11:[function(e,t,i){"use strict";var n=e("./utils");var r=n.unique("vpaidIframe");var a=e("./VPAIDAdUnit");var s="<!DOCTYPE html>"+'<html lang="en">'+'<head><meta charset="UTF-8"></head>'+'<body style="margin:0;padding:0"><div class="ad-element"></div>'+'<script type="text/javascript" src="{{iframeURL_JS}}"></script>'+'<script type="text/javascript">'+'window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');'+"</script>"+"</body>"+"</html>";var o="AdStopped";function u(e,t,i,a){i=i||{};this._id=r();this._destroyed=false;this._frameContainer=n.createElementInEl(e,"div");this._videoEl=t;this._vpaidOptions=a||{timeout:1e4};this._templateConfig={template:i.template||s,extraOptions:i.extraOptions||{}}}u.prototype.destroy=function y(){if(this._destroyed){return}this._destroyed=true;d.call(this)};u.prototype.isDestroyed=function m(){return this._destroyed};u.prototype.loadAdUnit=function A(e,t){v.call(this);d.call(this);var i=this;var r=n.createIframeWithContent(this._frameContainer,this._templateConfig.template,n.extend({iframeURL_JS:e,iframeID:this.getID(),origin:g()},this._templateConfig.extraOptions));this._frame=r;this._onLoad=n.callbackTimeout(this._vpaidOptions.timeout,s.bind(this),u.bind(this));window.addEventListener("message",this._onLoad);function s(e){if(e.origin!==g())return;var r=JSON.parse(e.data);if(r.id!==i.getID())return;var s,u,l;if(!i._frame.contentWindow){u="the iframe is not anymore in the DOM tree"}else{l=i._frame.contentWindow.getVPAIDAd;u=n.validate(typeof l==="function","the ad didn't return a function to create an ad")}if(!u){var d=i._frame.contentWindow.document.querySelector(".ad-element");s=new a(l(),d,i._videoEl,i._frame);s.subscribe(o,c.bind(i));u=n.validate(s.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}i._adUnit=s;h.call(i);t(u,u?null:s);return true}function u(){t("timeout",null)}};u.prototype.unloadAdUnit=function k(){d.call(this)};u.prototype.getID=function(){return this._id};function l(e){var t=this[e];if(t){t.remove();delete this[e]}}function c(){f.call(this);delete this._adUnit}function d(){f.call(this);p.call(this)}function f(){l.call(this,"_frame");h.call(this)}function h(){if(this._onLoad){window.removeEventListener("message",this._onLoad);n.clearCallbackTimeout(this._onLoad);delete this._onLoad}}function p(){if(this._adUnit){this._adUnit.stopAd();delete this._adUnit}}function v(){if(this._destroyed){throw new Error("VPAIDHTML5Client already destroyed!")}}function g(){if(window.location.origin){return window.location.origin}else{return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}}t.exports=u},{"./VPAIDAdUnit":10,"./utils":13}],12:[function(e,t,i){"use strict";function n(){this._subscribers={}}n.prototype.subscribe=function r(e,t,i){if(!this.isHandlerAttached(e,t)){this.get(t).push({handler:e,context:i,eventName:t})}};n.prototype.unsubscribe=function a(e,t){this._subscribers[t]=this.get(t).filter(function(t){return e!==t.handler})};n.prototype.unsubscribeAll=function s(){this._subscribers={}};n.prototype.trigger=function(e,t){var i=this;var n=this.get(e).concat(this.get("*"));n.forEach(function(e){setTimeout(function(){if(i.isHandlerAttached(e.handler,e.eventName)){e.handler.call(e.context,t)}},0)})};n.prototype.triggerSync=function(e,t){var i=this.get(e).concat(this.get("*"));i.forEach(function(e){e.handler.call(e.context,t)})};n.prototype.get=function o(e){if(!this._subscribers[e]){this._subscribers[e]=[]}return this._subscribers[e]};n.prototype.isHandlerAttached=function u(e,t){return this.get(t).some(function(t){return e===t.handler})};t.exports=n},{}],13:[function(e,t,i){"use strict";function n(){}function r(e,t){return e?null:new Error(t)}var a={};function s(e){var t=a[e];if(t){clearTimeout(t);delete a[e]}}function o(e,t,i){var r,o;o=setTimeout(function(){t=n;delete o[r];i()},e);r=function(){if(t.apply(this,arguments)){s(r)}};a[r]=o;return r}function u(e,t,i){var n=document.createElement(t);if(i)n.id=i;e.appendChild(n);return n}function l(e,t,i){var n=c(e,null,i.zIndex);if(!h(n,f(t,i)))return;return n}function c(e,t,i){var n=document.createElement("iframe");n.src=t||"about:blank";n.marginWidth="0";n.marginHeight="0";n.frameBorder="0";n.width="100%";n.height="100%";d(n);if(i){n.style.zIndex=i}n.setAttribute("SCROLLING","NO");e.innerHTML="";e.appendChild(n);return n}function d(e){e.style.position="absolute";e.style.left="0";e.style.top="0";e.style.margin="0px";e.style.padding="0px";e.style.border="none";e.style.width="100%";e.style.height="100%"}function f(e,t){Object.keys(t).forEach(function(i){var n=typeof n==="object"?JSON.stringify(t[i]):t[i];e=e.replace(new RegExp("{{"+i+"}}","g"),n)});return e}function h(e,t){var i=e.contentWindow&&e.contentWindow.document;if(!i)return false;i.write(t);return true}function p(e,t){Object.keys(t).forEach(function(i){e[i]=t[i]});return e}function v(e){var t=-1;return function(){return e+"_"+ ++t}}t.exports={noop:n,validate:r,clearCallbackTimeout:s,callbackTimeout:o,createElementInEl:u,createIframeWithContent:l,createIframe:c,setFullSizeStyle:d,simpleTemplate:f,setIframeContent:h,extend:p,unique:v}},{}],14:[function(e,t,i){(function(e,i){if(typeof define==="function"&&define.amd){define(i)}else if(typeof t==="object"&&t.exports){t.exports=i()}else{e.swfobject=i()}})(this,function(){var e="undefined",t="object",i="Shockwave Flash",n="ShockwaveFlash.ShockwaveFlash",r="application/x-shockwave-flash",a="SWFObjectExprInst",s="onreadystatechange",o=window,u=document,l=navigator,c=false,d=[],f=[],h=[],p=[],v,g,y,m,A=false,k=false,_,w,T=true,b=false,E=function(){var a=typeof u.getElementById!==e&&typeof u.getElementsByTagName!==e&&typeof u.createElement!==e,s=l.userAgent.toLowerCase(),d=l.platform.toLowerCase(),f=d?/win/.test(d):/win/.test(s),h=d?/mac/.test(d):/mac/.test(s),p=/webkit/.test(s)?parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,v=l.appName==="Microsoft Internet Explorer",g=[0,0,0],y=null;if(typeof l.plugins!==e&&typeof l.plugins[i]===t){y=l.plugins[i].description;if(y&&(typeof l.mimeTypes!==e&&l.mimeTypes[r]&&l.mimeTypes[r].enabledPlugin)){
c=true;v=false;y=y.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=q(y.replace(/^(.*)\..*$/,"$1"));g[1]=q(y.replace(/^.*\.(.*)\s.*$/,"$1"));g[2]=/[a-zA-Z]/.test(y)?q(y.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0}}else if(typeof o.ActiveXObject!==e){try{var m=new ActiveXObject(n);if(m){y=m.GetVariable("$version");if(y){v=true;y=y.split(" ")[1].split(",");g=[q(y[0]),q(y[1]),q(y[2])]}}}catch(A){}}return{w3:a,pv:g,wk:p,ie:v,win:f,mac:h}}(),S=function(){if(!E.w3){return}if(typeof u.readyState!==e&&(u.readyState==="complete"||u.readyState==="interactive")||typeof u.readyState===e&&(u.getElementsByTagName("body")[0]||u.body)){V()}if(!A){if(typeof u.addEventListener!==e){u.addEventListener("DOMContentLoaded",V,false)}if(E.ie){u.attachEvent(s,function t(){if(u.readyState==="complete"){u.detachEvent(s,t);V()}});if(o==top){(function i(){if(A){return}try{u.documentElement.doScroll("left")}catch(e){setTimeout(i,0);return}V()})()}}if(E.wk){(function n(){if(A){return}if(!/loaded|complete/.test(u.readyState)){setTimeout(n,0);return}V()})()}}}();function V(){if(A||!document.getElementsByTagName("body")[0]){return}try{var e,t=z("span");t.style.display="none";e=u.getElementsByTagName("body")[0].appendChild(t);e.parentNode.removeChild(e);e=null;t=null}catch(i){return}A=true;var n=d.length;for(var r=0;r<n;r++){d[r]()}}function C(e){if(A){e()}else{d[d.length]=e}}function I(t){if(typeof o.addEventListener!==e){o.addEventListener("load",t,false)}else if(typeof u.addEventListener!==e){u.addEventListener("load",t,false)}else if(typeof o.attachEvent!==e){X(o,"onload",t)}else if(typeof o.onload==="function"){var i=o.onload;o.onload=function(){i();t()}}else{o.onload=t}}function L(){var i=u.getElementsByTagName("body")[0];var n=z(t);n.setAttribute("style","visibility: hidden;");n.setAttribute("type",r);var a=i.appendChild(n);if(a){var s=0;(function o(){if(typeof a.GetVariable!==e){try{var t=a.GetVariable("$version");if(t){t=t.split(" ")[1].split(",");E.pv=[q(t[0]),q(t[1]),q(t[2])]}}catch(r){E.pv=[8,0,0]}}else if(s<10){s++;setTimeout(o,10);return}i.removeChild(n);a=null;F()})()}else{F()}}function F(){var t=f.length;if(t>0){for(var i=0;i<t;i++){var n=f[i].id;var r=f[i].callbackFn;var a={success:false,id:n};if(E.pv[0]>0){var s=W(n);if(s){if(J(f[i].swfVersion)&&!(E.wk&&E.wk<312)){Q(n,true);if(r){a.success=true;a.ref=U(n);a.id=n;r(a)}}else if(f[i].expressInstall&&P()){var o={};o.data=f[i].expressInstall;o.width=s.getAttribute("width")||"0";o.height=s.getAttribute("height")||"0";if(s.getAttribute("class")){o.styleclass=s.getAttribute("class")}if(s.getAttribute("align")){o.align=s.getAttribute("align")}var u={};var l=s.getElementsByTagName("param");var c=l.length;for(var d=0;d<c;d++){if(l[d].getAttribute("name").toLowerCase()!=="movie"){u[l[d].getAttribute("name")]=l[d].getAttribute("value")}}D(o,u,n,r)}else{x(s);if(r){r(a)}}}}else{Q(n,true);if(r){var h=U(n);if(h&&typeof h.SetVariable!==e){a.success=true;a.ref=h;a.id=h.id}r(a)}}}}}d[0]=function(){if(c){L()}else{F()}};function U(i){var n=null,r=W(i);if(r&&r.nodeName.toUpperCase()==="OBJECT"){if(typeof r.SetVariable!==e){n=r}else{n=r.getElementsByTagName(t)[0]||r}}return n}function P(){return!k&&J("6.0.65")&&(E.win||E.mac)&&!(E.wk&&E.wk<312)}function D(t,i,n,r){var s=W(n);n=B(n);k=true;y=r||null;m={success:false,id:n};if(s){if(s.nodeName.toUpperCase()==="OBJECT"){v=M(s);g=null}else{v=s;g=n}t.id=a;if(typeof t.width===e||!/%$/.test(t.width)&&q(t.width)<310){t.width="310"}if(typeof t.height===e||!/%$/.test(t.height)&&q(t.height)<137){t.height="137"}var l=E.ie?"ActiveX":"PlugIn",c="MMredirectURL="+encodeURIComponent(o.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+l+"&MMdoctitle="+encodeURIComponent(u.title.slice(0,47)+" - Flash Player Installation");if(typeof i.flashvars!==e){i.flashvars+="&"+c}else{i.flashvars=c}if(E.ie&&s.readyState!=4){var d=z("div");n+="SWFObjectNew";d.setAttribute("id",n);s.parentNode.insertBefore(d,s);s.style.display="none";j(s)}N(t,i,n)}}function x(e){if(E.ie&&e.readyState!=4){e.style.display="none";var t=z("div");e.parentNode.insertBefore(t,e);t.parentNode.replaceChild(M(e),t);j(e)}else{e.parentNode.replaceChild(M(e),e)}}function M(e){var i=z("div");if(E.win&&E.ie){i.innerHTML=e.innerHTML}else{var n=e.getElementsByTagName(t)[0];if(n){var r=n.childNodes;if(r){var a=r.length;for(var s=0;s<a;s++){if(!(r[s].nodeType==1&&r[s].nodeName==="PARAM")&&!(r[s].nodeType==8)){i.appendChild(r[s].cloneNode(true))}}}}}return i}function R(e,t){var i=z("div");i.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>";return i.firstChild}function N(i,n,a){var s,o=W(a);a=B(a);if(E.wk&&E.wk<312){return s}if(o){var u=E.ie?z("div"):z(t),l,c,d;if(typeof i.id===e){i.id=a}for(d in n){if(n.hasOwnProperty(d)&&d.toLowerCase()!=="movie"){O(u,d,n[d])}}if(E.ie){u=R(i.data,u.innerHTML)}for(l in i){if(i.hasOwnProperty(l)){c=l.toLowerCase();if(c==="styleclass"){u.setAttribute("class",i[l])}else if(c!=="classid"&&c!=="data"){u.setAttribute(l,i[l])}}}if(E.ie){h[h.length]=i.id}else{u.setAttribute("type",r);u.setAttribute("data",i.data)}o.parentNode.replaceChild(u,o);s=u}return s}function O(e,t,i){var n=z("param");n.setAttribute("name",t);n.setAttribute("value",i);e.appendChild(n)}function j(e){var t=W(e);if(t&&t.nodeName.toUpperCase()==="OBJECT"){if(E.ie){t.style.display="none";(function i(){if(t.readyState==4){for(var e in t){if(typeof t[e]==="function"){t[e]=null}}t.parentNode.removeChild(t)}else{setTimeout(i,10)}})()}else{t.parentNode.removeChild(t)}}}function H(e){return e&&e.nodeType&&e.nodeType===1}function B(e){return H(e)?e.id:e}function W(e){if(H(e)){return e}var t=null;try{t=u.getElementById(e)}catch(i){}return t}function z(e){return u.createElement(e)}function q(e){return parseInt(e,10)}function X(e,t,i){e.attachEvent(t,i);p[p.length]=[e,t,i]}function J(e){e+="";var t=E.pv,i=e.split(".");i[0]=q(i[0]);i[1]=q(i[1])||0;i[2]=q(i[2])||0;return t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?true:false}function $(t,i,n,r){var a=u.getElementsByTagName("head")[0];if(!a){return}var s=typeof n==="string"?n:"screen";if(r){_=null;w=null}if(!_||w!=s){var o=z("style");o.setAttribute("type","text/css");o.setAttribute("media",s);_=a.appendChild(o);if(E.ie&&typeof u.styleSheets!==e&&u.styleSheets.length>0){_=u.styleSheets[u.styleSheets.length-1]}w=s}if(_){if(typeof _.addRule!==e){_.addRule(t,i)}else if(typeof u.createTextNode!==e){_.appendChild(u.createTextNode(t+" {"+i+"}"))}}}function Q(e,t){if(!T){return}var i=t?"visible":"hidden",n=W(e);if(A&&n){n.style.visibility=i}else if(typeof e==="string"){$("#"+e,"visibility:"+i)}}function G(t){var i=/[\\\"<>\.;]/;var n=i.exec(t)!==null;return n&&typeof encodeURIComponent!==e?encodeURIComponent(t):t}var K=function(){if(E.ie){window.attachEvent("onunload",function(){var e=p.length;for(var t=0;t<e;t++){p[t][0].detachEvent(p[t][1],p[t][2])}var i=h.length;for(var n=0;n<i;n++){j(h[n])}for(var r in E){E[r]=null}E=null;for(var a in swfobject){swfobject[a]=null}swfobject=null})}}();return{registerObject:function(e,t,i,n){if(E.w3&&e&&t){var r={};r.id=e;r.swfVersion=t;r.expressInstall=i;r.callbackFn=n;f[f.length]=r;Q(e,false)}else if(n){n({success:false,id:e})}},getObjectById:function(e){if(E.w3){return U(e)}},embedSWF:function(i,n,r,a,s,o,u,l,c,d){var f=B(n),h={success:false,id:f};if(E.w3&&!(E.wk&&E.wk<312)&&i&&n&&r&&a&&s){Q(f,false);C(function(){r+="";a+="";var p={};if(c&&typeof c===t){for(var v in c){p[v]=c[v]}}p.data=i;p.width=r;p.height=a;var g={};if(l&&typeof l===t){for(var y in l){g[y]=l[y]}}if(u&&typeof u===t){for(var m in u){if(u.hasOwnProperty(m)){var A=b?encodeURIComponent(m):m,k=b?encodeURIComponent(u[m]):u[m];if(typeof g.flashvars!==e){g.flashvars+="&"+A+"="+k}else{g.flashvars=A+"="+k}}}}if(J(s)){var _=N(p,g,n);if(p.id==f){Q(f,true)}h.success=true;h.ref=_;h.id=_.id}else if(o&&P()){p.data=o;D(p,g,n,d);return}else{Q(f,true)}if(d){d(h)}})}else if(d){d(h)}},switchOffAutoHideShow:function(){T=false},enableUriEncoding:function(t){b=typeof t===e?true:t},ua:E,getFlashPlayerVersion:function(){return{major:E.pv[0],minor:E.pv[1],release:E.pv[2]}},hasFlashPlayerVersion:J,createSWF:function(e,t,i){if(E.w3){return N(e,t,i)}else{return undefined}},showExpressInstall:function(e,t,i,n){if(E.w3&&P()){D(e,t,i,n)}},removeSWF:function(e){if(E.w3){j(e)}},createCSS:function(e,t,i,n){if(E.w3){$(e,t,i,n)}},addDomLoadEvent:C,addLoadEvent:I,getQueryParamValue:function(e){var t=u.location.search||u.location.hash;if(t){if(/\?/.test(t)){t=t.split("?")[1]}if(!e){return G(t)}var i=t.split("&");for(var n=0;n<i.length;n++){if(i[n].substring(0,i[n].indexOf("="))==e){return G(i[n].substring(i[n].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(k){var e=W(a);if(e&&v){e.parentNode.replaceChild(v,e);if(g){Q(g,true);if(E.ie){v.style.display="block"}}if(y){y(m)}}k=false}},version:"2.3"}})},{}],15:[function(e,t,i){"use strict";var n=e("./InLine");var r=e("./Wrapper");function a(e){if(!(this instanceof a)){return new a(e)}this.initialize(e)}a.prototype.initialize=function(e){this.id=e.attr("id");this.sequence=e.attr("sequence");if(e.inLine){this.inLine=new n(e.inLine)}if(e.wrapper){this.wrapper=new r(e.wrapper)}};t.exports=a},{"./InLine":18,"./Wrapper":29}],16:[function(e,t,i){"use strict";var n=e("./TrackingEvent");var r=e("../../utils/utilityFunctions");var a=e("../../utils/xml");var s=e("../../utils/consoleLogger");function o(e){if(!(this instanceof o)){return new o(e)}s.info("<Companion> found companion ad");s.debug("<Companion>  companionJTree:",e);this.creativeType=a.attr(e.staticResource,"creativeType");this.staticResource=a.keyValue(e.staticResource);s.info("<Companion>  creativeType: "+this.creativeType);s.info("<Companion>  staticResource: "+this.staticResource);var t=null;if(a.keyValue(e.HTMLResource)){t=a.keyValue(e.HTMLResource)}else if(a.keyValue(e.hTMLResource)){t=a.keyValue(e.hTMLResource)}if(t!==null){s.info("<Companion> found html resource",t)}this.htmlResource=t;var i=null;if(a.keyValue(e.IFrameResource)){i=a.keyValue(e.IFrameResource)}else if(a.keyValue(e.iFrameresource)){i=a.keyValue(e.iFrameresource)}if(i!==null){s.info("<Companion> found iframe resource",i)}this.iframeResource=i;this.id=a.attr(e,"id");this.width=a.attr(e,"width");this.height=a.attr(e,"height");this.expandedWidth=a.attr(e,"expandedWidth");this.expandedHeight=a.attr(e,"expandedHeight");this.scalable=a.attr(e,"scalable");this.maintainAspectRatio=a.attr(e,"maintainAspectRatio");this.minSuggestedDuration=a.attr(e,"minSuggestedDuration");this.apiFramework=a.attr(e,"apiFramework");this.companionClickThrough=a.keyValue(e.companionClickThrough);this.trackingEvents=u(e.trackingEvents&&e.trackingEvents.tracking);s.info("<Companion>  companionClickThrough: "+this.companionClickThrough);function u(e){var t=[];if(r.isDefined(e)){e=r.isArray(e)?e:[e];e.forEach(function(e){t.push(new n(e))})}return t}}t.exports=o},{"../../utils/consoleLogger":42,"../../utils/utilityFunctions":48,"../../utils/xml":49,"./TrackingEvent":22}],17:[function(e,t,i){"use strict";var n=e("./Linear");var r=e("./TrackingEvent");var a=e("./Companion");var s=e("./NonLinear");var o=e("../../utils/utilityFunctions");function u(e){if(!(this instanceof u)){return new u(e)}this.id=e.attr("id");this.sequence=e.attr("sequence");this.adId=e.attr("adId");this.apiFramework=e.attr("apiFramework");if(e.linear){this.linear=new n(e.linear)}if(e.companionAds){var t=[];var i=e.companionAds&&e.companionAds.companion;if(o.isDefined(i)){i=o.isArray(i)?i:[i];i.forEach(function(e){t.push(new a(e))})}this.companionAds=t}if(e.nonLinearAds&&e.nonLinearAds.nonLinear){var l=[];var c=e.nonLinearAds.trackingEvents&&e.nonLinearAds.trackingEvents.tracking;if(o.isDefined(c)){c=o.isArray(c)?c:[c];c.forEach(function(e){l.push(new r(e))})}var d=[];var f=e.nonLinearAds&&e.nonLinearAds.nonLinear;if(o.isDefined(f)){f=o.isArray(f)?f:[f];f.forEach(function(e){var t=new s(e);if(l.length>0){t.trackingEvents=l}d.push(t)})}this.nonLinearAds=d}}u.prototype.isSupported=function(){if(this.linear){return this.linear.isSupported()}return true};u.parseCreatives=function l(e){var t=[];var i;if(o.isDefined(e)&&o.isDefined(e.creative)){i=o.isArray(e.creative)?e.creative:[e.creative];i.forEach(function(e){t.push(new u(e))})}return t};t.exports=u},{"../../utils/utilityFunctions":48,"./Companion":16,"./Linear":19,"./NonLinear":21,"./TrackingEvent":22}],18:[function(e,t,i){"use strict";var n=e("./vastUtil");var r=e("./Creative");var a=e("../../utils/utilityFunctions");var s=e("../../utils/xml");function o(e){if(!(this instanceof o)){return new o(e)}this.adTitle=s.keyValue(e.adTitle);this.adSystem=s.keyValue(e.adSystem);this.impressions=n.parseImpressions(e.impression);this.creatives=r.parseCreatives(e.creatives);this.description=s.keyValue(e.description);this.advertiser=s.keyValue(e.advertiser);this.surveys=t(e.survey);this.error=s.keyValue(e.error);this.pricing=s.keyValue(e.pricing);this.extensions=e.extensions;function t(e){if(e){return a.transformArray(a.isArray(e)?e:[e],function(e){if(a.isNotEmptyString(e.keyValue)){return{uri:e.keyValue,type:e.attr("type")}}return undefined})}return[]}}o.prototype.isSupported=function(){var e,t;if(this.creatives.length===0){return false}for(e=0,t=this.creatives.length;e<t;e+=1){if(!this.creatives[e].isSupported()){return false}}return true};t.exports=o},{"../../utils/utilityFunctions":48,"../../utils/xml":49,"./Creative":17,"./vastUtil":31}],19:[function(e,t,i){"use strict";var n=e("./TrackingEvent");var r=e("./MediaFile");var a=e("./VideoClicks");var s=e("../../utils/utilityFunctions");var o=e("./parsers");var u=e("../../utils/xml");function l(e){if(!(this instanceof l)){return new l(e)}this.duration=o.duration(u.keyValue(e.duration));this.mediaFiles=i(e.mediaFiles&&e.mediaFiles.mediaFile);this.trackingEvents=t(e.trackingEvents&&e.trackingEvents.tracking,this.duration);this.skipoffset=o.offset(u.attr(e,"skipoffset"),this.duration);if(e.videoClicks){this.videoClicks=new a(e.videoClicks)}if(e.adParameters){this.adParameters=u.keyValue(e.adParameters);if(u.attr(e.adParameters,"xmlEncoded")){this.adParameters=u.decode(this.adParameters)}}function t(e,t){var i=[];if(s.isDefined(e)){e=s.isArray(e)?e:[e];e.forEach(function(e){i.push(new n(e,t))})}return i}function i(e){var t=[];if(s.isDefined(e)){e=s.isArray(e)?e:[e];e.forEach(function(e){t.push(new r(e))})}return t}}l.prototype.isSupported=function(){var e,t;for(e=0,t=this.mediaFiles.length;e<t;e+=1){if(this.mediaFiles[e].isSupported()){return true}}return false};t.exports=l},{"../../utils/utilityFunctions":48,"../../utils/xml":49,"./MediaFile":20,"./TrackingEvent":22,"./VideoClicks":28,"./parsers":30}],20:[function(e,t,i){"use strict";var n=e("../../utils/xml");var r=e("./vastUtil");var a=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"];function s(e){if(!(this instanceof s)){return new s(e)}this.src=n.keyValue(e);for(var t=0;t<a.length;t++){var i=a[t];this[i]=e.attr(i)}}s.prototype.isSupported=function(){if(r.isVPAID(this)){return!!r.findSupportedVPAIDTech(this.type)}if(this.type==="video/x-flv"){return r.isFlashSupported()}return true};t.exports=s},{"../../utils/xml":49,"./vastUtil":31}],21:[function(e,t,i){"use strict";var n=e("./TrackingEvent");var r=e("../../utils/utilityFunctions");var a=e("../../utils/xml");function s(e){if(!(this instanceof s)){return new s(e)}this.creativeType=a.attr(e.staticResource,"creativeType");this.staticResource=a.keyValue(e.staticResource);this.nonLinearClickThrough=a.keyValue(e.nonLinearClickThrough);var t=null;if(a.keyValue(e.HTMLResource)){t=a.keyValue(e.HTMLResource)}else if(a.keyValue(e.hTMLResource)){t=a.keyValue(e.hTMLResource)}this.htmlResource=t;var i=null;if(a.keyValue(e.IFrameResource)){i=a.keyValue(e.IFrameResource)}else if(a.keyValue(e.iFrameresource)){i=a.keyValue(e.iFrameresource)}else if(a.keyValue(e.iFrameResource)){i=a.keyValue(e.iFrameResource)}this.iframeResource=i;this.id=a.attr(e,"id");this.width=a.attr(e,"width");this.height=a.attr(e,"height");this.maintainAspectRatio=a.attr(e,"maintainAspectRatio");this.scalable=a.attr(e,"scalable");this.minSuggestedDuration=a.attr(e,"minSuggestedDuration");this.nonLinearClickTracking=a.keyValue(e.nonLinearClickTracking);this.expandedWidth=a.attr(e,"expandedWidth");this.expandedHeight=a.attr(e,"expandedHeight");this.apiFramework=a.attr(e,"apiFramework");this.adParameters=a.attr(e,"adParameters");this.trackingEvents=o(e.trackingEvents&&e.trackingEvents.tracking);function o(e){var t=[];if(r.isDefined(e)){e=r.isArray(e)?e:[e];e.forEach(function(e){t.push(new n(e))})}return t}}s.prototype.isSupported=function(){return true};t.exports=s},{"../../utils/utilityFunctions":48,"../../utils/xml":49,"./TrackingEvent":22}],22:[function(e,t,i){"use strict";var n=e("./parsers");var r=e("../../utils/xml");function a(e,t){if(!(this instanceof a)){return new a(e,t)}this.name=e.attr("event");this.uri=r.keyValue(e);if("progress"===this.name){this.offset=n.offset(e.attr("offset"),t)}}t.exports=a},{"../../utils/xml":49,"./parsers":30}],23:[function(e,t,i){"use strict";var n=e("./Ad");var r=e("./VASTError");var a=e("./VASTResponse");var s=e("./vastUtil");var o=e("../../utils/async");var u=e("../../utils/http").http;var l=e("../../utils/utilityFunctions");var c=e("../../utils/xml");var d=e("../../utils/consoleLogger");function f(e){if(!(this instanceof f)){return new f(e)}var t={WRAPPER_LIMIT:5};e=e||{};this.settings=l.extend({},e,t);this.errorURLMacros=[]}f.prototype.getVASTResponse=function h(e,t){var i=this;var n=s(e,t);if(n){if(l.isFunction(t)){return t(n)}throw n}o.waterfall([this._getVASTAd.bind(this,e),a],t);function a(e,t){try{var n=i._buildVASTResponse(e);t(null,n)}catch(r){t(r)}}function s(e,t){if(!e){return new r("on VASTClient.getVASTResponse, missing ad tag URL")}if(!l.isFunction(t)){return new r("on VASTClient.getVASTResponse, missing callback function")}}};f.prototype._getVASTAd=function(e,t){var i=this;a(e,function(e,n){var r=n&&l.isArray(n.ads)?n.ads:null;if(e){i._trackError(e,r);return t(e,r)}f(r.shift(),[],a);function a(e,n){if(e){i._trackError(e,n);if(r.length>0){f(r.shift(),[],a)}else{t(e,n)}}else{t(null,n)}}});function a(e,t){var n=i._requestVASTXml.bind(i,e);o.waterfall([n,s],t)}function s(e,t){var i;try{i=c.toJXONTree(e);d.debug("built JXONTree from VAST response:",i);if(l.isArray(i.ad)){i.ads=i.ad}else if(i.ad){i.ads=[i.ad]}else{i.ads=[]}t(u(i),i)}catch(n){t(new r("on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml",100),null)}}function u(e){var t=c.attr(e,"version");if(!e.ad){return new r("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree",303)}if(t&&(t!=3&&t!=2)){return new r('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version "'+t+'"',102)}return null}function f(e,t,n){if(t.length>=i.WRAPPER_LIMIT){return n(new r("on VASTClient.getVASTAd.getAd, players wrapper limit reached (the limit is "+i.WRAPPER_LIMIT+")",302),t)}o.waterfall([function(t){if(l.isString(e)){v(e,t)}else{t(null,e)}},h],function(e,i){if(i){t.push(i)}if(e){return n(e,t)}if(i.wrapper){return f(i.wrapper.VASTAdTagURI,t,n)}return n(null,t)})}function h(e,t){try{var i=new n(e);t(p(i),i)}catch(a){t(new r("on VASTClient.getVASTAd.buildAd, error parsing xml",100),null)}}function p(e){var t=e.wrapper;var i=e.inLine;var n="on VASTClient.getVASTAd.validateAd, ";if(i&&t){return new r(n+"InLine and Wrapper both found on the same Ad",101)}if(!i&&!t){return new r(n+"nor wrapper nor inline elements found on the Ad",101)}if(i&&!i.isSupported()){return new r(n+"could not find MediaFile that is supported by this video player",403)}if(t&&!t.VASTAdTagURI){return new r(n+"missing 'VASTAdTagURI' in wrapper",101)}return null}function v(e,t){i._requestVASTXml(e,function(e,i){if(e){return t(e)}try{var n=c.toJXONTree(i);t(u(n),n.ad)}catch(a){t(new r("on VASTClient.getVASTAd.requestVASTAd, error parsing xml",100))}})}};f.prototype._requestVASTXml=function p(e,t){try{if(l.isFunction(e)){e(n)}else{d.info("requesting adTagUrl: "+e);u.get(e,n,{withCredentials:true})}}catch(i){t(i)}function n(e,i,n){if(e){var a=l.isDefined(n)?"on VASTClient.requestVastXML, HTTP request error with status '"+n+"'":"on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn";return t(new r(a,301),null)}t(null,i)}};f.prototype._buildVASTResponse=function v(e){var t=new a;i(t,e);n(t);return t;function i(e,t){t.forEach(function(t){e.addAd(t)})}function n(e){var t=e.trackingEvents.progress;if(!e.hasLinear()&&!e.hasNonLinear()){throw new r("on VASTClient._buildVASTResponse, Received an Ad type that is not supported",200)}if(e.duration===undefined&&!e.hasNonLinear()){throw new r("on VASTClient._buildVASTResponse, Missing duration field in VAST response",101)}if(t){t.forEach(function(e){if(!l.isNumber(e.offset)){throw new r("on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event",101)}})}}};f.prototype._trackError=function(e,t){if(!l.isArray(t)||t.length===0){return}var i=[];t.forEach(n);s.track(i,{ERRORCODE:e.code||900});function n(e){if(e.wrapper&&e.wrapper.error){i.push(e.wrapper.error)}if(e.inLine&&e.inLine.error){i.push(e.inLine.error)}}};t.exports=f},{"../../utils/async":41,"../../utils/consoleLogger":42,"../../utils/http":44,"../../utils/utilityFunctions":48,"../../utils/xml":49,"./Ad":15,"./VASTError":24,"./VASTResponse":26,"./vastUtil":31}],24:[function(e,t,i){"use strict";function n(e,t){this.message="VAST Error: "+(e||"");if(t){this.code=t}}n.prototype=new Error;n.prototype.name="VAST Error";t.exports=n},{}],25:[function(e,t,i){"use strict";var n=e("./VASTResponse");var r=e("./VASTError");var a=e("./VASTTracker");var s=e("./vastUtil");var o=e("../../utils/async");var u=e("../../utils/dom");var l=e("../../utils/playerUtils");var c=e("../../utils/utilityFunctions");var d=e("../../utils/consoleLogger");function f(e){if(!(this instanceof f)){return new f(e)}this.player=e}f.prototype.playAd=function h(e,t){var i=this;t=t||c.noop;if(!(e instanceof n)){return t(new r("On VASTIntegrator, missing required VASTResponse"))}o.waterfall([function(t){t(null,e)},this._selectAdSource.bind(this),this._createVASTTracker.bind(this),this._addClickThrough.bind(this),this._addSkipButton.bind(this),this._setupEvents.bind(this),this._playSelectedAd.bind(this)],function(e,n){if(e&&n){i._trackError(e,n)}t(e,n)});this._adUnit={_src:null,type:"VAST",pauseAd:function(){if(window.MavenVX){window.MavenVX.clickPause=false}i.player.pause(true)},resumeAd:function(){i.player.play(true)},isPaused:function(){return i.player.paused(true)},getSrc:function(){return this._src}};return this._adUnit};f.prototype._selectAdSource=function p(e,t){var i;var n=u.getDimension(this.player.el()).width;e.mediaFiles.sort(function a(e,t){var i=Math.abs(n-e.width);var r=Math.abs(n-t.width);return i-r});i=this.player.selectSource(e.mediaFiles).source;if(i){d.info("selected source: ",i);if(this._adUnit){this._adUnit._src=i}return t(null,i,e)}t(new r("Could not find Ad mediafile supported by this player",403),e)};f.prototype._createVASTTracker=function v(e,t,i){var n=this.player;try{i(null,e,new a(e.src,t,n),t)}catch(r){i(r,t)}};f.prototype._setupEvents=function g(e,t,i,n){var r;var a=this.player;a.on("fullscreenchange",o);a.on("vast.adStart",d);a.on("pause",u);a.on("timeupdate",c);a.on("volumechange",f);l.once(a,["vast.adEnd","vast.adsCancel"],s);l.once(a,["vast.adEnd","vast.adsCancel","vast.adSkip"],function(e){if(e.type==="vast.adEnd"){t.trackComplete();a.trigger("vast.complete")}});return n(null,e,i);function s(){a.off("fullscreenchange",o);a.off("vast.adStart",d);a.off("pause",u);a.off("timeupdate",c);a.off("volumechange",f)}function o(){if(a.isFullscreen()){t.trackFullscreen();a.trigger("vast.exitFullscreen")}else{t.trackExitFullscreen();a.trigger("vast.fullscreen")}}function u(){if(Math.abs(a.duration()-a.currentTime())<2){return}t.trackPause();a.trigger("vast.pause");l.once(a,["play","vast.adEnd","vast.adsCancel"],function(e){if(e.type==="play"){t.trackResume();a.trigger("vast.resume")}})}function c(){var e=a.currentTime()*1e3;t.trackProgress(e)}function d(){t.trackImpressions();a.trigger("vast.impression");t.trackCreativeView();a.trigger("vast.creativeView")}function f(){var e=a.muted();if(e){t.trackMute();a.trigger("vast.mute")}else if(r){t.trackUnmute();a.trigger("vast.unmute")}r=e}};f.prototype._addSkipButton=function y(e,t,i,n){var r;var a=this;if(c.isNumber(i.skipoffset)){r=i.skipoffset/1e3;s(this.player,r)}n(null,e,t,i);function s(e,t){var i=o(e);var n=d.bind(a,i,t,e);e.el().appendChild(i);e.on("timeupdate",n);l.once(e,["vast.adEnd","vast.adsCancel"],r);function r(){e.off("timeupdate",n);u.remove(i)}}function o(e){var i=window.document.createElement("div");u.addClass(i,"vast-skip-button");i.onclick=function(n){if(u.hasClass(i,"enabled")){t.trackSkip();e.trigger("vast.adSkip")}if(window.Event.prototype.stopPropagation!==undefined){n.stopPropagation()}else{return false}};return i}function d(e,t,i){var n=Math.ceil(t-i.currentTime());if(n>0){e.innerHTML="Skip in "+c.toFixedDigits(n,2)+"..."}else{if(!u.hasClass(e,"enabled")){u.addClass(e,"enabled");e.innerHTML="Skip ad"}}}};f.prototype._addClickThrough=function m(e,t,i,n){var r=this.player;var a=d(r,t,i);var o=f.bind(this,a,i,r);r.el().insertBefore(a,r.controlBar.el());r.on("timeupdate",o);l.once(r,["vast.adEnd","vast.adsCancel"],p);return n(null,e,t,i);function d(e,t,i){var n=window.document.createElement("a");var r=i.clickThrough;u.addClass(n,"vast-blocker");n.href=h(r,e);if(c.isString(r)){n.target="_blank"}n.onclick=function(i){if(e.paused()){e.play();if(window.Event.prototype.stopPropagation!==undefined){i.stopPropagation()}return false}e.pause();e.trigger("vast.adclick");t.trackClick()};return n}function f(e,t,i){e.href=h(t.clickThrough,i)}function h(t,i){var n={ASSETURI:e.src,CONTENTPLAYHEAD:s.formatProgress(i.currentTime()*1e3)};return t?s.parseURLMacro(t,n):"#"}function p(){r.off("timeupdate",o);u.remove(a)}};f.prototype._playSelectedAd=function A(e,t,i){var n=this.player;n.preload("auto");n.src(e);d.debug("<VASTIntegrator._playSelectedAd> waiting for durationchange to play the ad...");l.once(n,["durationchange","error","vast.adsCancel"],function(e){if(e.type==="durationchange"){d.debug("<VASTIntegrator._playSelectedAd> got durationchange; calling playAd()");a()}else if(e.type==="error"){i(new r("on VASTIntegrator, Player is unable to play the Ad",400),t)}});function a(){l.once(n,["playing","vast.adsCancel"],function(e){if(e.type==="vast.adsCancel"){return}d.debug("<VASTIntegrator._playSelectedAd/playAd> got playing event; triggering vast.adStart...");n.trigger("vast.adStart");n.on("ended",r);n.on("vast.adsCancel",r);n.on("vast.adSkip",r);function r(e){if(e.type==="ended"&&n.duration()-n.currentTime()>3){return}n.off("ended",r);n.off("vast.adsCancel",r);n.off("vast.adSkip",r);if(e.type==="ended"||e.type==="vast.adSkip"){i(null,t)}}});d.debug("<VASTIntegrator._playSelectedAd/playAd> calling player.play()...");n.play()}};f.prototype._trackError=function k(e,t){s.track(t.errorURLMacros,{ERRORCODE:e.code||900})};t.exports=f},{"../../utils/async":41,"../../utils/consoleLogger":42,"../../utils/dom":43,"../../utils/playerUtils":46,"../../utils/utilityFunctions":48,"./VASTError":24,"./VASTResponse":26,"./VASTTracker":27,"./vastUtil":31}],26:[function(e,t,i){"use strict";var n=e("./Ad");var r=e("./VideoClicks");var a=e("./Linear");var s=e("./NonLinear");var o=e("./InLine");var u=e("./Wrapper");var l=e("../../utils/utilityFunctions");var c=e("../../utils/xml");window.InLine__A=o;function d(){if(!(this instanceof d)){return new d}this._linearAdded=false;this._nonLinearAdded=false;this.ads=[];this.errorURLMacros=[];this.impressions=[];this.clickTrackings=[];this.customClicks=[];this.trackingEvents={};this.mediaFiles=[];this.clickThrough=undefined;this.adTitle="";this.duration=undefined;this.skipoffset=undefined}d.prototype.addAd=function(e){var t,i;if(e instanceof n){t=e.inLine;i=e.wrapper;this.ads.push(e);if(t){this._addInLine(t)}if(i){this._addWrapper(i)}}};d.prototype._addErrorTrackUrl=function(e){var t=e instanceof c.JXONTree?c.keyValue(e):e;if(t){this.errorURLMacros.push(t)}};d.prototype._addImpressions=function(e){l.isArray(e)&&f(this.impressions,e)};d.prototype._addClickThrough=function(e){if(l.isNotEmptyString(e)){this.clickThrough=e}};d.prototype._addClickTrackings=function(e){l.isArray(e)&&f(this.clickTrackings,e)};d.prototype._addCustomClicks=function(e){l.isArray(e)&&f(this.customClicks,e)};d.prototype._addTrackingEvents=function(e){var t=this.trackingEvents;if(e){e=l.isArray(e)?e:[e];e.forEach(function(e){if(!t[e.name]){t[e.name]=[]}t[e.name].push(e)})}};d.prototype._addTitle=function(e){if(l.isNotEmptyString(e)){this.adTitle=e}};d.prototype._addDuration=function(e){if(l.isNumber(e)){this.duration=e}};d.prototype._addVideoClicks=function(e){if(e instanceof r){this._addClickThrough(e.clickThrough);this._addClickTrackings(e.clickTrackings);this._addCustomClicks(e.customClicks)}};d.prototype._addMediaFiles=function(e){l.isArray(e)&&f(this.mediaFiles,e)};d.prototype._addSkipoffset=function(e){if(e){this.skipoffset=e}};d.prototype._addAdParameters=function(e){if(e){this.adParameters=e}};d.prototype._addLinear=function(e){if(e instanceof a){this._addDuration(e.duration);this._addTrackingEvents(e.trackingEvents);this._addVideoClicks(e.videoClicks);this._addMediaFiles(e.mediaFiles);this._addSkipoffset(e.skipoffset);this._addAdParameters(e.adParameters);this._linearAdded=true}};d.prototype._addNonLinearAd=function(e){if(e instanceof s){this._nonLinearAdded=true}};d.prototype._addInLine=function(e){var t=this;if(e instanceof o){this._addTitle(e.adTitle);this._addErrorTrackUrl(e.error);this._addImpressions(e.impressions);e.creatives.forEach(function(e){if(e.linear){t._addLinear(e.linear)}if(e.nonLinearAds){e.nonLinearAds.forEach(function(e){t._addNonLinearAd(e)})}})}};d.prototype._addWrapper=function(e){var t=this;if(e instanceof u){this._addErrorTrackUrl(e.error);this._addImpressions(e.impressions);e.creatives.forEach(function(e){var i=e.linear;if(i){t._addVideoClicks(i.videoClicks);t.clickThrough=undefined;t._addTrackingEvents(i.trackingEvents)}})}};d.prototype.hasLinear=function(){return this._linearAdded};d.prototype.hasNonLinear=function(){return this._nonLinearAdded};function f(e,t){t.forEach(function(t){e.push(t)})}t.exports=d},{"../../utils/utilityFunctions":48,"../../utils/xml":49,"./Ad":15,"./InLine":18,"./Linear":19,"./NonLinear":21,"./VideoClicks":28,"./Wrapper":29}],27:[function(e,t,i){"use strict";var n=e("./VASTError");var r=e("./VASTResponse");var a=e("./vastUtil");var s=e("../../utils/utilityFunctions");function o(e,t,i){if(!(this instanceof o)){return new o(e,t,i)}if(s.isUndefined(i)){i={trigger:s.noop}}this.sanityCheck(e,t,i);this.initialize(e,t,i)}o.prototype.initialize=function(e,t,i){this.response=t;this.assetURI=e;this.progress=0;this.quartiles={start:{tracked:false,time:0},firstQuartile:{tracked:false,time:Math.round(25*t.duration)/100},midpoint:{tracked:false,time:Math.round(50*t.duration)/100},thirdQuartile:{tracked:false,time:Math.round(75*t.duration)/100}};this.triggerable=i};o.prototype.sanityCheck=function(e,t,i){if(!s.isString(e)||s.isEmptyString(e)){throw new n("on VASTTracker constructor, missing required the URI of the ad asset being played")}if(!(t instanceof r)){throw new n("on VASTTracker constructor, missing required VAST response")}if(!s.isFunction(i.trigger)){throw new n("on VASTTracker constructor, missing triggerable")}};o.prototype.trackURLs=function u(e,t){if(s.isArray(e)&&e.length>0){t=s.extend({ASSETURI:this.assetURI,CONTENTPLAYHEAD:a.formatProgress(this.progress)},t||{});a.track(e,t)}};o.prototype.trackEvent=function l(e,t){this.trackURLs(i(this.response.trackingEvents[e]));if(t){this.response.trackingEvents[e]=undefined}function i(e){var t;if(e){t=[];e.forEach(function(e){if(!e.uri){return}t.push(e.uri)})}return t}};o.prototype.trackProgress=function c(e){var t=this;
var i=[];var n=true;var r=false;var a=this.response.trackingEvents;var o=this.triggerable;if(s.isNumber(e)){l("rewind",r,u(this.progress,e));c(e);f(e);h();this.progress=e}function u(t,i){var n=3e3;return t>e&&Math.abs(i-t)>n}function l(e,t,n){if(n){o.trigger("vast."+e)}if(a[e]&&n){i.push({name:e,trackOnce:!!t})}}function c(e){var i=t.quartiles;var r=t.quartiles.start;var a=t.quartiles.firstQuartile;var s=t.quartiles.midpoint;var o=t.quartiles.thirdQuartile;if(!r.tracked){u("start",e)}else if(!a.tracked){u("firstQuartile",e)}else if(!s.tracked){u("midpoint",e)}else if(!o.tracked){u("thirdQuartile",e)}function u(e,t){var r=i[e];if(d(r,t)){r.tracked=true;l(e,n,true)}}}function d(e,t){var i=e.time;return t>=i&&t<=i+5e3}function f(e){if(!s.isArray(a.progress)){return}var i=[];a.progress.forEach(function(n){if(n.offset<=e){t.trackURLs([n.uri])}else{i.push(n)}});a.progress=i}function h(){i.forEach(function(e){t.trackEvent(e.name,e.trackOnce)})}};["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(e){o.prototype["track"+s.capitalize(e)]=function(){this.trackEvent(e)}});["skip","close","closeLinear"].forEach(function(e){o.prototype["track"+s.capitalize(e)]=function(){this.trackEvent(e,true)}});["start","firstQuartile","midpoint","thirdQuartile"].forEach(function(e){o.prototype["track"+s.capitalize(e)]=function(){this.quartiles[e].tracked=true;this.trackEvent(e,true)}});o.prototype.trackComplete=function(){if(this.quartiles.thirdQuartile.tracked){this.trackEvent("complete",true)}};o.prototype.trackErrorWithCode=function d(e){if(s.isNumber(e)){this.trackURLs(this.response.errorURLMacros,{ERRORCODE:e})}};o.prototype.trackImpressions=function f(){this.trackURLs(this.response.impressions)};o.prototype.trackCreativeView=function h(){this.trackEvent("creativeView")};o.prototype.trackClick=function p(){this.trackURLs(this.response.clickTrackings)};t.exports=o},{"../../utils/utilityFunctions":48,"./VASTError":24,"./VASTResponse":26,"./vastUtil":31}],28:[function(e,t,i){"use strict";var n=e("../../utils/utilityFunctions");var r=e("../../utils/xml");function a(e){if(!(this instanceof a)){return new a(e)}this.clickThrough=r.keyValue(e.clickThrough);this.clickTrackings=t(e.clickTracking);this.customClicks=t(e.customClick);function t(e){var t=[];if(e){e=n.isArray(e)?e:[e];e.forEach(function(e){t.push(r.keyValue(e))})}return t}}t.exports=a},{"../../utils/utilityFunctions":48,"../../utils/xml":49}],29:[function(e,t,i){"use strict";var n=e("./vastUtil");var r=e("./Creative");var a=e("../../utils/utilityFunctions");var s=e("../../utils/xml");function o(e){if(!(this instanceof o)){return new o(e)}this.adSystem=s.keyValue(e.adSystem);this.impressions=n.parseImpressions(e.impression);this.VASTAdTagURI=s.keyValue(e.vASTAdTagURI);this.creatives=r.parseCreatives(e.creatives);this.error=s.keyValue(e.error);this.extensions=e.extensions;this.followAdditionalWrappers=a.isDefined(s.attr(e,"followAdditionalWrappers"))?s.attr(e,"followAdditionalWrappers"):true;this.allowMultipleAds=s.attr(e,"allowMultipleAds");this.fallbackOnNoAd=s.attr(e,"fallbackOnNoAd")}t.exports=o},{"../../utils/utilityFunctions":48,"../../utils/xml":49,"./Creative":17,"./vastUtil":31}],30:[function(e,t,i){"use strict";var n=e("../../utils/utilityFunctions");var r=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;var a={duration:function s(e){var t,i;if(n.isString(e)){t=e.match(r);if(t){i=a(t[1])+s(t[2])+o(t[3])+parseInt(t[5]||0)}}return isNaN(i)?null:i;function a(e){return parseInt(e,10)*60*60*1e3}function s(e){return parseInt(e,10)*60*1e3}function o(e){return parseInt(e,10)*1e3}},offset:function o(e,t){if(i(e)){return n(e,t)}return a.duration(e);function i(e){var t=/^\d+(\.\d+)?%$/g;return t.test(e)}function n(e,t){if(t){return r(t,parseFloat(e.replace("%","")))}return null}function r(e,t){return e*t/100}}};t.exports=a},{"../../utils/utilityFunctions":48}],31:[function(e,t,i){"use strict";var n=e("../../utils/utilityFunctions");var r=e("../vpaid/VPAIDHTML5Tech");var a=e("../vpaid/VPAIDFlashTech");var s=e("VPAIDFLASHClient/js/VPAIDFLASHClient");var o={track:function u(e,t){var i=o.parseURLMacros(e,t);var n=[];i.forEach(function(e){var t=new Image;t.src=e;n.push(t)});return n},parseURLMacros:function l(e,t){var i=[];t=t||{};if(!t["CACHEBUSTING"]){t["CACHEBUSTING"]=Math.round(Math.random()*1e10)}e.forEach(function(e){i.push(o._parseURLMacro(e,t))});return i},parseURLMacro:function c(e,t){t=t||{};if(!t["CACHEBUSTING"]){t["CACHEBUSTING"]=Math.round(Math.random()*1e10)}return o._parseURLMacro(e,t)},_parseURLMacro:function d(e,t){t=t||{};n.forEach(t,function(t,i){e=e.replace(new RegExp("\\["+i+"\\]","gm"),t)});return e},parseDuration:function f(e){var t=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;var i,r;if(n.isString(e)){i=e.match(t);if(i){r=a(i[1])+s(i[2])+o(i[3])+parseInt(i[5]||0)}}return isNaN(r)?null:r;function a(e){return parseInt(e,10)*60*60*1e3}function s(e){return parseInt(e,10)*60*1e3}function o(e){return parseInt(e,10)*1e3}},parseImpressions:function h(e){if(e){e=n.isArray(e)?e:[e];return n.transformArray(e,function(e){if(n.isNotEmptyString(e.keyValue)){return e.keyValue}return undefined})}return[]},formatProgress:function p(e){var t,i,r,a;t=e/(60*60*1e3);t=Math.floor(t);i=e/(60*1e3)%60;i=Math.floor(i);r=e/1e3%60;r=Math.floor(r);a=e%1e3;return n.toFixedDigits(t,2)+":"+n.toFixedDigits(i,2)+":"+n.toFixedDigits(r,2)+"."+n.toFixedDigits(a,3)},parseOffset:function v(e,t){if(i(e)){return n(e,t)}return o.parseDuration(e);function i(e){var t=/^\d+(\.\d+)?%$/g;return t.test(e)}function n(e,t){if(t){return r(t,parseFloat(e.replace("%","")))}return null}function r(e,t){return e*t/100}},VPAID_techs:[a,r],isVPAID:function g(e){return!!e&&e.apiFramework==="VPAID"},findSupportedVPAIDTech:function y(e){var t,i,n;for(t=0,i=this.VPAID_techs.length;t<i;t+=1){n=this.VPAID_techs[t];if(n.supports(e)){return n}}return null},isFlashSupported:function m(){return s.isSupported()},runFlashSupportCheck:function A(e){s.runFlashTest({data:e})}};t.exports=o},{"../../utils/utilityFunctions":48,"../vpaid/VPAIDFlashTech":33,"../vpaid/VPAIDHTML5Tech":34,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],32:[function(e,t,i){"use strict";var n=e("../vast/VASTError");var r=e("../../utils/utilityFunctions");function a(e,t){if(!(this instanceof a)){return new a(e,t)}i(e,t);this.options=r.extend({},t);this._adUnit=e;function i(e,t){if(!e||!a.checkVPAIDInterface(e)){throw new n("on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface")}if(!r.isObject(t)){throw new n("on VPAIDAdUnitWrapper, expected options hash  but got '"+t+"'")}if(!("responseTimeout"in t)||!r.isNumber(t.responseTimeout)){throw new n("on VPAIDAdUnitWrapper, expected responseTimeout in options")}}}a.checkVPAIDInterface=function s(e){var t=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"];for(var i=0,n=t.length;i<n;i++){if(!e||!r.isFunction(e[t[i]])){return false}}return a(e)&&s(e);function a(e){return r.isFunction(e.subscribe)||r.isFunction(e.addEventListener)||r.isFunction(e.on)}function s(e){return r.isFunction(e.unsubscribe)||r.isFunction(e.removeEventListener)||r.isFunction(e.off)}};a.prototype.adUnitAsyncCall=function(){var e=r.arrayLikeObjToArray(arguments);var t=e.shift();var i=e.pop();var a;s(t,i,this._adUnit);e.push(o());this._adUnit[t].apply(this._adUnit,e);a=setTimeout(function(){a=null;i(new n("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '"+t+"'"));i=r.noop},this.options.responseTimeout);function s(e,t,i){if(!r.isString(e)||!r.isFunction(i[e])){throw new n("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name")}if(!r.isFunction(t)){throw new n("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")}}function o(){return function(){if(a){clearTimeout(a)}i.apply(this,arguments)}}};a.prototype.on=function(e,t){var i=this._adUnit.addEventListener||this._adUnit.subscribe||this._adUnit.on;i.call(this._adUnit,e,t)};a.prototype.off=function(e,t){var i=this._adUnit.removeEventListener||this._adUnit.unsubscribe||this._adUnit.off;i.call(this._adUnit,e,t)};a.prototype.waitForEvent=function(e,t,i){var a;s(e,t);i=i||null;this.on(e,o);a=setTimeout(function(){t(new n("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '"+e+"'"));a=null;t=r.noop},this.options.responseTimeout);function s(e,t){if(!r.isString(e)){throw new n("on VPAIDAdUnitWrapper.waitForEvent, missing evt name")}if(!r.isFunction(t)){throw new n("on VPAIDAdUnitWrapper.waitForEvent, missing callback")}}function o(){var e=r.arrayLikeObjToArray(arguments);if(a){clearTimeout(a);a=null}e.unshift(null);t.apply(i,e)}};a.prototype.handshakeVersion=function(e,t){this.adUnitAsyncCall("handshakeVersion",e,t)};a.prototype.initAd=function(e,t,i,n,r,a){this.waitForEvent("AdLoaded",a);this._adUnit.initAd(e,t,i,n,r)};a.prototype.resizeAd=function(e,t,i,n){this.adUnitAsyncCall("resizeAd",e,t,i,n)};a.prototype.startAd=function(e){this.waitForEvent("AdStarted",e);this._adUnit.startAd()};a.prototype.stopAd=function(e){this.waitForEvent("AdStopped",e);this._adUnit.stopAd()};a.prototype.pauseAd=function(e){this.waitForEvent("AdPaused",e);this._adUnit.pauseAd()};a.prototype.resumeAd=function(e){this.waitForEvent("AdPlaying",e);this._adUnit.resumeAd()};a.prototype.expandAd=function(e){this.waitForEvent("AdExpandedChange",e);this._adUnit.expandAd()};a.prototype.collapseAd=function(e){this.waitForEvent("AdExpandedChange",e);this._adUnit.collapseAd()};a.prototype.skipAd=function(e){this.waitForEvent("AdSkipped",e);this._adUnit.skipAd()};["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(e){var t="get"+r.capitalize(e);a.prototype[t]=function(e){this.adUnitAsyncCall(t,e)}});a.prototype.setAdVolume=function(e,t){this.adUnitAsyncCall("setAdVolume",e,t)};t.exports=a},{"../../utils/utilityFunctions":48,"../vast/VASTError":24}],33:[function(e,t,i){"use strict";var n=e("../../utils/mimetypes");var r=e("../vast/VASTError");var a=e("VPAIDFLASHClient/js/VPAIDFLASHClient");var s=e("../../utils/utilityFunctions");var o=e("../../utils/dom");var u=e("../../utils/consoleLogger");function l(e,t){if(!(this instanceof l)){return new l(e)}i(e);this.name="vpaid-flash";this.mediaFile=e;this.containerEl=null;this.vpaidFlashClient=null;this.settings=t;function i(e){if(!e||!s.isString(e.src)){throw new r("on VPAIDFlashTech, invalid MediaFile")}}}l.VPAIDFLASHClient=a;l.supports=function(e){return n.flash.indexOf(e)>-1&&l.VPAIDFLASHClient.isSupported()};l.prototype.loadAdUnit=function c(e,t,i){var n=this;var a=this.settings&&this.settings.vpaidFlashLoaderPath?{data:this.settings.vpaidFlashLoaderPath}:undefined;c(e,i);this.containerEl=e;u.debug("<VPAIDFlashTech.loadAdUnit> loading VPAIDFLASHClient with opts:",a);this.vpaidFlashClient=new l.VPAIDFLASHClient(e,function(e){if(e){return i(e)}u.info("<VPAIDFlashTech.loadAdUnit> calling VPAIDFLASHClient.loadAdUnit(); that.mediaFile:",n.mediaFile);n.vpaidFlashClient.loadAdUnit(n.mediaFile.src,i)},a);function c(e,t){if(!o.isDomElement(e)){throw new r("on VPAIDFlashTech.loadAdUnit, invalid dom container element")}if(!s.isFunction(t)){throw new r("on VPAIDFlashTech.loadAdUnit, missing valid callback")}}};l.prototype.unloadAdUnit=function(){if(this.vpaidFlashClient){try{this.vpaidFlashClient.destroy()}catch(e){u.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidFlashClient=null}if(this.containerEl){o.remove(this.containerEl);this.containerEl=null}};t.exports=l},{"../../utils/consoleLogger":42,"../../utils/dom":43,"../../utils/mimetypes":45,"../../utils/utilityFunctions":48,"../vast/VASTError":24,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],34:[function(e,t,i){"use strict";var n=e("../../utils/mimetypes");var r=e("../vast/VASTError");var a=e("VPAIDHTML5Client/js/VPAIDHTML5Client");var s=e("../../utils/utilityFunctions");var o=e("../../utils/dom");var u=e("../../utils/consoleLogger");function l(e){if(!(this instanceof l)){return new l(e)}t(e);this.name="vpaid-html5";this.containerEl=null;this.videoEl=null;this.vpaidHTMLClient=null;this.mediaFile=e;function t(e){if(!e||!s.isString(e.src)){throw new r(l.INVALID_MEDIA_FILE)}}}l.VPAIDHTML5Client=a;l.supports=function(e){return!s.isOldIE()&&n.html5.indexOf(e)>-1};l.prototype.loadAdUnit=function d(e,t,i){n(e,t,i);this.containerEl=e;this.videoEl=t;this.vpaidHTMLClient=new l.VPAIDHTML5Client(e,t,{});this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,i);function n(e,t,i){if(!o.isDomElement(e)){throw new r(l.INVALID_DOM_CONTAINER_EL)}if(!o.isDomElement(t)||t.tagName.toLowerCase()!=="video"){throw new r(l.INVALID_DOM_CONTAINER_EL)}if(!s.isFunction(i)){throw new r(l.MISSING_CALLBACK)}}};l.prototype.unloadAdUnit=function f(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(e){u.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}if(this.containerEl){o.remove(this.containerEl);this.containerEl=null}};var c="on VPAIDHTML5Tech";l.INVALID_MEDIA_FILE=c+", invalid MediaFile";l.INVALID_DOM_CONTAINER_EL=c+", invalid container HtmlElement";l.INVALID_DOM_VIDEO_EL=c+", invalid HTMLVideoElement";l.MISSING_CALLBACK=c+", missing valid callback";t.exports=l},{"../../utils/consoleLogger":42,"../../utils/dom":43,"../../utils/mimetypes":45,"../../utils/utilityFunctions":48,"../vast/VASTError":24,"VPAIDHTML5Client/js/VPAIDHTML5Client":11}],35:[function(e,t,i){"use strict";var n=e("../../utils/mimetypes");var r=e("../vast/VASTError");var a=e("../vast/VASTResponse");var s=e("../vast/VASTTracker");var o=e("../vast/vastUtil");var u=e("./VPAIDAdUnitWrapper");var l=e("../../utils/async");var c=e("../../utils/dom");var d=e("../../utils/playerUtils");var f=e("../../utils/utilityFunctions");var h=e("../../utils/consoleLogger");function p(e,t){if(!(this instanceof p)){return new p(e)}this.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"};this.player=e;this.containerEl=i(e);this.options={responseTimeout:5e3,VPAID_VERSION:"2.0"};this.settings=t;function i(){var t=document.createElement("div");c.addClass(t,"VPAID-container");e.el().insertBefore(t,e.controlBar.el());return t}}p.prototype.playAd=function y(e,t){if(!(e instanceof a)){return t(new r("on VASTIntegrator.playAd, missing required VASTResponse"))}var i=this;var n=this.player;h.debug("<VPAIDIntegrator.playAd> looking for supported tech...");var s=this._findSupportedTech(e,this.settings);t=t||f.noop;this._adUnit=null;c.addClass(n.el(),"vjs-vpaid-ad");n.on("vast.adsCancel",d);n.one("vpaid.adEnd",function(){n.off("vast.adsCancel",d);p()});if(s){h.info("<VPAIDIntegrator.playAd> found tech: ",s);l.waterfall([function(t){t(null,s,e)},this._loadAdUnit.bind(this),this._playAdUnit.bind(this),this._finishPlaying.bind(this)],u);this._adUnit={_paused:true,type:"VPAID",pauseAd:function(){n.trigger("vpaid.pauseAd");n.pause(true)},resumeAd:function(){n.trigger("vpaid.resumeAd")},isPaused:function(){return this._paused},getSrc:function(){return s.mediaFile}}}else{h.debug("<VPAIDIntegrator.playAd> could not find suitable tech");var o=new r("on VPAIDIntegrator.playAd, could not find a supported mediaFile",403);u(o,this._adUnit,e)}return this._adUnit;function u(e,r,a){if(e&&a){i._trackError(a,e.code)}n.trigger("vpaid.adEnd");t(e,a)}function d(){n.trigger("vpaid.adEnd")}function p(){if(s){s.unloadAdUnit()}c.removeClass(n.el(),"vjs-vpaid-ad")}};p.prototype._findSupportedTech=function(e,t){if(!(e instanceof a)){return null}var i=e.mediaFiles.filter(o.isVPAID);var r=t&&t.preferredTech;var s=[];var u,l,c,d,f;for(u=0,l=i.length;u<l;u+=1){c=i[u];d=o.findSupportedVPAIDTech(c.type);if(!d){continue}f=r?c.type===r||n[r]&&n[r].indexOf(c.type)>-1:false;if(f){return new d(c,t)}s.push({mediaFile:c,tech:d})}if(s.length){var h=s[0];return new h.tech(h.mediaFile,t)}return null};p.prototype._createVPAIDAdUnitWrapper=function(e,t,i){return new u(e,{src:t,responseTimeout:i})};p.prototype._loadAdUnit=function(e,t,i){var n=this;var r=this.player;var a=r.el().querySelector(".vjs-tech");var s=this.settings.responseTimeout||this.options.responseTimeout;e.loadAdUnit(this.containerEl,a,function(a,o){if(a){return i(a,o,t)}try{var u=n._createVPAIDAdUnitWrapper(o,e.mediaFile.src,s);var l="vjs-"+e.name+"-ad";c.addClass(r.el(),l);r.one("vpaid.adEnd",function(){c.removeClass(r.el(),l)});i(null,u,t)}catch(d){i(d,o,t)}})};p.prototype._playAdUnit=function(e,t,i){l.waterfall([function(i){i(null,e,t)},this._handshake.bind(this),this._initAd.bind(this),this._setupEvents.bind(this),this._addSkipButton.bind(this),this._linkPlayerControls.bind(this),this._startAd.bind(this)],i)};p.prototype._handshake=function m(e,t,i){e.handshakeVersion(this.options.VPAID_VERSION,function(a,s){if(a){return i(a,e,t)}if(s&&n(s)){return i(null,e,t)}return i(new r('on VPAIDIntegrator._handshake, unsupported version "'+s+'"'),e,t)});function n(e){var t=a(e);return t>=1&&t<=2}function a(e){var t=e.split(".");return parseInt(t[0],10)}};p.prototype._initAd=function(e,t,i){var n=this.player.el().querySelector(".vjs-tech");var r=c.getDimension(n);e.initAd(r.width,r.height,this.VIEW_MODE.NORMAL,-1,{AdParameters:t.adParameters||""},function(n){i(n,e,t)})};p.prototype._createVASTTracker=function(e,t){return new s(e,t)};p.prototype._setupEvents=function(e,t,i){var n=e.options.src;var r=this._createVASTTracker(n,t);var a=this.player;var s=this;e.on("AdSkipped",function(){a.trigger("vpaid.AdSkipped");r.trackSkip()});e.on("AdImpression",function(){a.trigger("vpaid.AdImpression");r.trackImpressions()});e.on("AdStarted",function(){a.trigger("vpaid.AdStarted");r.trackCreativeView();u()});e.on("AdVideoStart",function(){a.trigger("vpaid.AdVideoStart");r.trackStart();u()});e.on("AdPlaying",function(){a.trigger("vpaid.AdPlaying");r.trackResume();u()});e.on("AdPaused",function(){a.trigger("vpaid.AdPaused");r.trackPause();l()});function u(){if(s._adUnit&&s._adUnit.isPaused()){s._adUnit._paused=false}a.trigger("play")}function l(){if(s._adUnit){s._adUnit._paused=true}a.trigger("pause")}e.on("AdVideoFirstQuartile",function(){a.trigger("vpaid.AdVideoFirstQuartile");r.trackFirstQuartile()});e.on("AdVideoMidpoint",function(){a.trigger("vpaid.AdVideoMidpoint");r.trackMidpoint()});e.on("AdVideoThirdQuartile",function(){a.trigger("vpaid.AdVideoThirdQuartile");r.trackThirdQuartile()});e.on("AdVideoComplete",function(){a.trigger("vpaid.AdVideoComplete");r.trackComplete()});e.on("AdClickThru",function(i){a.trigger("vpaid.AdClickThru");var n=i.url;var s=i.playerHandles;var u=f.isNotEmptyString(n)?n:l(t.clickThrough);r.trackClick();if(s&&u){window.open(u,"_blank")}function l(t){var i={ASSETURI:e.options.src,CONTENTPLAYHEAD:0};return t?o.parseURLMacro(t,i):null}});e.on("AdUserAcceptInvitation",function(){a.trigger("vpaid.AdUserAcceptInvitation");r.trackAcceptInvitation();r.trackAcceptInvitationLinear()});e.on("AdUserClose",function(){a.trigger("vpaid.AdUserClose");r.trackClose();r.trackCloseLinear()});e.on("AdUserMinimize",function(){a.trigger("vpaid.AdUserMinimize");r.trackCollapse()});e.on("AdError",function(){a.trigger("vpaid.AdError");r.trackErrorWithCode(901)});e.on("AdVolumeChange",function(){a.trigger("vpaid.AdVolumeChange");var t=a.volume();e.getAdVolume(function(e,i){if(t!==i){if(i===0&&t>0){r.trackMute()}if(i>0&&t===0){r.trackUnmute()}a.volume(i)}})});var d=v.bind(this,a,e,this.VIEW_MODE);var h=f.throttle(d,100);var p=this.settings.autoResize;if(p){c.addEventListener(window,"resize",h);c.addEventListener(window,"orientationchange",h)}a.on("vast.resize",d);a.on("vpaid.pauseAd",g);a.on("vpaid.resumeAd",y);a.one("vpaid.adEnd",function(){a.off("vast.resize",d);a.off("vpaid.pauseAd",g);a.off("vpaid.resumeAd",y);if(p){c.removeEventListener(window,"resize",h);c.removeEventListener(window,"orientationchange",h)}});i(null,e,t);function g(){e.pauseAd(f.noop)}function y(){e.resumeAd(f.noop)}};p.prototype._addSkipButton=function(e,t,i){var n;var r=this.player;e.on("AdSkippableStateChange",a);d.once(r,["vast.adEnd","vast.adsCancel"],o);i(null,e,t);function a(){r.trigger("vpaid.AdSkippableStateChange");e.getAdSkippableState(function(e,t){if(t){if(!n){s(r)}}else{o(r)}})}function s(e){}function o(){c.remove(n);n=null}function u(){var t=window.document.createElement("div");c.addClass(t,"vast-skip-button");c.addClass(t,"enabled");t.innerHTML="Skip ad";t.onclick=function(t){e.skipAd(f.noop);if(window.Event.prototype.stopPropagation!==undefined){t.stopPropagation()}else{return false}};return t}};p.prototype._linkPlayerControls=function(e,t,i){var n=this;r(this.player,e);a(this.player,e,this.VIEW_MODE);i(null,e,t);function r(e,t){e.on("volumechange",i);t.on("AdVolumeChange",n);e.one("vpaid.adEnd",function(){e.off("volumechange",i)});function i(){var i=e.muted()?0:e.volume();t.setAdVolume(i,g)}function n(){e.trigger("vpaid.AdVolumeChange");var i=e.volume();t.getAdVolume(function(t,n){if(t){g(t)}else{if(i!==n){e.volume(n)}}})}}function a(e,t,i){var r=v.bind(n,e,t,i);e.on("fullscreenchange",r);e.one("vpaid.adEnd",function(){e.off("fullscreenchange",r)})}};p.prototype._startAd=function(e,t,i){var n=this.player;e.startAd(function(r){if(!r){n.trigger("vast.adStart")}i(r,e,t)})};p.prototype._finishPlaying=function(e,t,i){var n=this.player;e.on("AdStopped",function(){n.trigger("vpaid.AdStopped");a(null)});e.on("AdError",function(e){var t=e?e.message:"on VPAIDIntegrator, error while waiting for the adUnit to finish playing";a(new r(t))});function a(n){i(n,e,t)}};p.prototype._trackError=function A(e,t){o.track(e.errorURLMacros,{ERRORCODE:t||901})};function v(e,t,i){var n=e.el().querySelector(".vjs-tech");var r=c.getDimension(n);var a=e.isFullscreen()?i.FULLSCREEN:i.NORMAL;t.resizeAd(r.width,r.height,a,g)}function g(e){if(e){h.error("ERROR: "+e.message,e)}}t.exports=p},{"../../utils/async":41,"../../utils/consoleLogger":42,"../../utils/dom":43,"../../utils/mimetypes":45,"../../utils/playerUtils":46,"../../utils/utilityFunctions":48,"../vast/VASTError":24,"../vast/VASTResponse":26,"../vast/VASTTracker":27,"../vast/vastUtil":31,"./VPAIDAdUnitWrapper":32}],36:[function(e,t,i){"use strict";var n=e("../../utils/dom");var r=document.createElement("div");r.className="vjs-ads-label vjs-control vjs-label-hidden";r.innerHTML="Advertisement";var a=function(e){return{init:function t(i,a){a.el=r;e.call(this,i,a);setTimeout(function(){var e=i.controlBar&&(i.controlBar.getChild("timerControls")||i.controlBar.getChild("currentTimeDisplay"));if(e){i.controlBar.el().insertBefore(r,e.el())}n.removeClass(r,"vjs-label-hidden")},0)},el:function i(){return r}}};t.exports=a},{"../../utils/dom":43}],37:[function(e,t,i){"use strict";var n=videojs.Component;var r=e("./ads-label")(n);videojs.AdsLabel=videojs.Component.extend(r)},{"./ads-label":36}],38:[function(e,t,i){"use strict";var n=document.createElement("div");var r=function(e){return{init:function t(i,r){r.el=n;n.className="vjs-black-poster";e.call(this,i,r);var a=i.getChild("posterImage");setTimeout(function(){if(a&&i&&i.el()){i.el().insertBefore(n,a.el())}},0)},el:function i(){return n}}};t.exports=r},{}],39:[function(e,t,i){"use strict";var n=videojs.Component;var r=e("./black-poster")(n);videojs.BlackPoster=videojs.Component.extend(r)},{"./black-poster":38}],40:[function(e,t,i){"use strict";var n=e("../ads/vast/VASTClient");var r=e("../ads/vast/VASTError");var a=e("../ads/vast/vastUtil");var s=e("../ads/vast/VASTIntegrator");var o=e("../ads/vpaid/VPAIDIntegrator");var u=e("../utils/async");var l=e("../utils/dom");var c=e("../utils/playerUtils");var d=e("../utils/utilityFunctions");var f=e("../utils/consoleLogger");t.exports=function h(e){var t;var i=this;var h=new n;var p=false;var v={timeout:500,iosPrerollCancelTimeout:2e3,adCancelTimeout:3e3,playAdAlways:false,adsEnabled:true,autoResize:true,vpaidFlashLoaderPath:"/VPAIDFlash.swf",verbosity:0,preroll:true,postroll:false,midrolls:[]};var g=d.extend({},v,e||{});var y=0;var m=d.isArray(g.midrolls)?g.midrolls.length:0;y+=g.midrolls.length;var A=[];var k=false;if(d.isUndefined(g.adTagUrl)&&d.isDefined(g.url)){g.adTagUrl=g.url}if(d.isString(g.adTagUrl)){g.adTagUrl=d.echoFn(g.adTagUrl)}if(d.isDefined(g.adTagXML)&&!d.isFunction(g.adTagXML)){return L(new r("on VideoJS VAST plugin, the passed adTagXML option does not contain a function"))}if(!d.isDefined(g.adTagUrl)&&!d.isFunction(g.adTagXML)){return L(new r("on VideoJS VAST plugin, missing adTagUrl on options object"))}f.setVerbosity(g.verbosity);a.runFlashSupportCheck(g.vpaidFlashLoaderPath);if(g.preroll){c.prepareForAds(i)}if(g.playAdAlways){i.on("vast.contentEnd",function(){setTimeout(function(){i.trigger("vast.reset")},0)})}if(g.preroll&&d.isBool(g.preroll)){y++;i.on("vast.firstPlay",function(){T();y--})}else{i.one("playing",function(){i.trigger("vast.contentStart")})}i.on("vast.contentStart",function(){k=false});i.on("ended",function(){if(!k){if(i.currentTime()>i.duration()-1){i.trigger("vast.postrollGo")}}});if(g.postroll&&d.isBool(g.postroll)){y++;i.one("vast.postrollGo",function(){if(i.currentTime()>i.duration()-1){T();y--}})}function _(e){if(!d.isArray(e)){return false}for(var t=0,n=e.length;t<n;t++){if(!d.isNumber(e[t])){return false}if(e[t]>=i.duration()){return false}}return true}function w(){if(k){i.off("timeupdate",w)}var e;if(A.length<m){e=A.length}else{i.off("timeupdate",w);return}var t=.5;if(i.currentTime()>g.midrolls[e]&&!i.paused()&&!k){i.off("timeupdate",w);T();A.push(true)}else if(i.currentTime()<g.midrolls[e]&&i.currentTime()>g.midrolls[e]-t&&!i.paused()&&!k){i.off("timeupdate",w);T();A.push(true)}}i.on("vast.adStart",function(){k=true});i.on("vast.adEnd",function(){k=false});i.on("playing",function(){if(!k){if(_(g.midrolls)){i.on("timeupdate",w)}}});i.on("paused",function(){if(!k){if(_()){i.off("timeupdate",w)}}});i.on("vast.reset",function(){t=null;b();y=0});i.vast={isEnabled:function(){return g.adsEnabled},enable:function(){g.adsEnabled=true},disable:function(){g.adsEnabled=false}};return i.vast;function T(){i.off("timeupdate",w);k=true;c.removeNativePoster(i);c.once(i,["vast.adsCancel","vast.adEnd","vast.adSkip"],function(){e();n()});u.waterfall([s,o,h,S],function(e,t){if(e){y--;L(e,t)}else{y--;i.trigger("vast.adEnd")}});function e(){if(i.vast&&i.vast.adUnit){i.vast.adUnit=null}}function n(){a();if(t){c.restorePlayerSnapshot(i,t);t=null}}function a(){c.once(i,["playing","vast.reset","vast.firstPlay"],function(e){if(e.type!=="playing"){return}i.trigger("vast.contentStart");c.once(i,["ended","vast.reset","vast.firstPlay"],function(e){if(e.type==="ended"&&!k){i.trigger("vast.contentEnd")}})})}function s(e){if(g.adsEnabled){return e(null)}e(new r("Ads are not enabled"))}function o(e){if(f()){t=c.getPlayerSnapshot(i);if(window.MavenVX){window.MavenVX.clickPause=false}i.pause();v();if(i.paused()){e(null)}else{c.once(i,["playing"],function(){if(window.MavenVX){window.MavenVX.clickPause=false}i.pause();e(null)})}}else{e(new r("video content has been playing before preroll ad"))}}function f(){return!d.isIPhone()||i.currentTime()<=g.iosPrerollCancelTimeout}function h(e){var t;p=false;t=setTimeout(function(){L(new r("timeout while waiting for the video to start playing",402))},g.adCancelTimeout);c.once(i,["vast.adStart","vast.adsCancel","vast.adSkip"],n);function n(){if(t){clearTimeout(t);t=null}}e(null)}function v(){l.addClass(i.el(),"vjs-vast-ad-loading");c.once(i,["vast.adStart","vast.adsCancel","vast.adSkip"],m)}function m(){setTimeout(function(){l.removeClass(i.el(),"vjs-vast-ad-loading")},100)}}function b(){i.trigger("vast.adsCancel");p=true}function E(){console.log("skipAd ................. called");i.trigger("vast.adSkip")}function S(e){u.waterfall([C,I],e)}function V(e){u.waterfall([C,I],function(t,i){if(d.isArray(g.adTagUrl)&&d.isDefined(g.adTagUrl[0])){V(e)}else{e(t,i)}})}function C(e){var t=/\=[0-9]*$/;var i=Math.round((new Date).getTime()/1e3);var n;if(d.isArray(g.adTagUrl)&&d.isDefined(g.adTagUrl[0])){if(g.adTags.length>=2){g.adTagUrl[1]=g.adTagUrl[1].replace(t,"="+i.toString())}h.getVASTResponse(g.adTagUrl?g.adTagUrl.shift():g.adTagXML,e)}else{var n=g.adTagUrl();n=n.replace(t,"="+i.toString());g.adTagUrl=d.echoFn(n);h.getVASTResponse(g.adTagUrl?g.adTagUrl():g.adTagXML,e)}}function I(e,t){if(p){return}if(d.isArray(g.adTagUrl)&&d.isDefined(g.adTagUrl[0])){g.adTagUrl.splice(0,g.adTagUrl.length)}var n=F(e)?new o(i,g):new s(i);var r=false;c.once(i,["vast.adStart","vast.adsCancel","vast.adSkip"],function(e){if(e.type==="vast.adStart"){a()}});c.once(i,["vast.adEnd","vast.adsCancel","vast.adSkip"],u);if(d.isIDevice()){l()}i.vast.vastResponse=e;if(!e.hasLinear()&&e.hasNonLinear()){b();return}f.debug("calling adIntegrator.playAd() with vastResponse:",e);i.vast.adUnit=n.playAd(e,t);function a(){if(r||i.controlBar.getChild("AdsLabel")){return}i.controlBar.addChild("AdsLabel")}function u(){i.controlBar.removeChild("AdsLabel");r=true}function l(){var e=3;var t=0;var n=0;i.on("timeupdate",a);i.on("ended",r);c.once(i,["vast.adEnd","vast.adsCancel","vast.adError","vast.adSkip"],s);function r(){if(i.duration()-t>e){if(window.MavenVX){window.MavenVX.clickPause=false}i.pause(true);i.play(true);i.currentTime(t)}}function a(){var r=i.currentTime();var a=Math.abs(r-t);if(a>e){n+=1;if(n>=2){if(window.MavenVX){window.MavenVX.clickPause=false}i.pause(true)}i.currentTime(t)}else{t=r}}function s(){i.off("timeupdate",a);i.off("ended",r)}}}function L(e,t){i.trigger({type:"vast.adError",error:e});if(y===0||!g.adsEnabled){b()}else{E()}f.error("AD ERROR:",e.message,e,t)}function F(e){var t,i;var n=e.mediaFiles;for(t=0,i=n.length;t<i;t++){if(a.isVPAID(n[t])){return true}}return false}}},{"../ads/vast/VASTClient":23,"../ads/vast/VASTError":24,"../ads/vast/VASTIntegrator":25,"../ads/vast/vastUtil":31,"../ads/vpaid/VPAIDIntegrator":35,"../utils/async":41,"../utils/consoleLogger":42,"../utils/dom":43,"../utils/playerUtils":46,"../utils/utilityFunctions":48}],41:[function(e,t,i){var n=e("./utilityFunctions");var r={};r.setImmediate=function(e){setTimeout(e,0)};r.iterator=function(e){var t=function(i){var n=function(){if(e.length){e[i].apply(null,arguments)}return n.next()};n.next=function(){return i<e.length-1?t(i+1):null};return n};return t(0)};r.waterfall=function(e,t){t=t||function(){};if(!n.isArray(e)){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length){return t()}var a=function(e){return function(i){if(i){t.apply(null,arguments);t=function(){}}else{var n=Array.prototype.slice.call(arguments,1);var s=e.next();if(s){n.push(a(s))}else{n.push(t)}r.setImmediate(function(){e.apply(null,n)})}}};a(r.iterator(e))()};r.when=function(e,t){if(!n.isFunction(t)){throw new Error("async.when error: missing callback argument")}var i=n.isFunction(e)?e:function(){return!!e};return function(){var e=n.arrayLikeObjToArray(arguments);var r=e.pop();if(i.apply(null,e)){return t.apply(this,arguments)}e.unshift(null);return r.apply(null,e)}};t.exports=r},{"./utilityFunctions":48}],42:[function(e,t,i){"use strict";var n=0;var r="[videojs-vast-vpaid] ";function a(e){n=e}function s(e,t){if(t.length>0&&typeof t[0]==="string"){t[0]=r+t[0]}if(e.apply){e.apply(console,Array.prototype.slice.call(t))}else{e(Array.prototype.slice.call(t))}}function o(){if(n<4){return}if(typeof console.debug==="undefined"){s(console.log,arguments)}else{s(console.debug,arguments)}}function u(){if(n<3){return}s(console.log,arguments)}function l(){if(n<2){return}s(console.info,arguments)}function c(){if(n<1){return}s(console.warn,arguments)}function d(){s(console.error,arguments)}var f={setVerbosity:a,debug:o,log:u,info:l,warn:c,error:d};if(typeof console==="undefined"||!console.log){f.debug=function(){};f.log=function(){};f.info=function(){};f.warn=function(){};f.error=function(){}}t.exports=f},{}],43:[function(e,t,i){"use strict";var n=e("./utilityFunctions");var r={};r.isVisible=function a(e){var t=window.getComputedStyle(e);return t.visibility!=="hidden"};r.isHidden=function s(e){var t=window.getComputedStyle(e);return t.display==="none"};r.isShown=function o(e){
return!r.isHidden(e)};r.hide=function u(e){e.__prev_style_display_=e.style.display;e.style.display="none"};r.show=function l(e){if(r.isHidden(e)){e.style.display=e.__prev_style_display_}e.__prev_style_display_=undefined};r.hasClass=function c(e,t){var i,r,a;if(n.isNotEmptyString(t)){if(e.classList){return e.classList.contains(t)}i=n.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[];t=t||"";for(r=0,a=i.length;r<a;r+=1){if(i[r]===t){return true}}}return false};r.addClass=function(e,t){var i;if(n.isNotEmptyString(t)){if(e.classList){return e.classList.add(t)}i=n.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[];if(n.isString(t)&&n.isNotEmptyString(t.replace(/\s+/,""))){i.push(t);e.setAttribute("class",i.join(" "))}}};r.removeClass=function(e,t){var i;if(n.isNotEmptyString(t)){if(e.classList){return e.classList.remove(t)}i=n.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[];var r=[];var a,s;if(n.isString(t)&&n.isNotEmptyString(t.replace(/\s+/,""))){for(a=0,s=i.length;a<s;a+=1){if(t!==i[a]){r.push(i[a])}}e.setAttribute("class",r.join(" "))}}};r.addEventListener=function d(e,t,i){if(n.isArray(e)){n.forEach(e,function(e){r.addEventListener(e,t,i)});return}if(n.isArray(t)){n.forEach(t,function(t){r.addEventListener(e,t,i)});return}if(e.addEventListener){e.addEventListener(t,i,false)}else if(e.attachEvent){e.attachEvent("on"+t,i)}};r.removeEventListener=function f(e,t,i){if(n.isArray(e)){n.forEach(e,function(e){r.removeEventListener(e,t,i)});return}if(n.isArray(t)){n.forEach(t,function(t){r.removeEventListener(e,t,i)});return}if(e.removeEventListener){e.removeEventListener(t,i,false)}else if(e.detachEvent){e.detachEvent("on"+t,i)}else{e["on"+t]=null}};r.dispatchEvent=function h(e,t){if(e.dispatchEvent){e.dispatchEvent(t)}else{e.fireEvent("on"+t.eventType,t)}};r.isDescendant=function p(e,t){var i=t.parentNode;while(i!==null){if(i===e){return true}i=i.parentNode}return false};r.getTextContent=function v(e){return e.textContent||e.text};r.prependChild=function g(e,t){if(t.parentNode){t.parentNode.removeChild(t)}return e.insertBefore(t,e.firstChild)};r.remove=function y(e){if(e&&e.parentNode){e.parentNode.removeChild(e)}};r.isDomElement=function m(e){return e instanceof Element};r.click=function(e,t){r.addEventListener(e,"click",t)};r.once=function(e,t,i){function n(){i.apply(null,arguments);r.removeEventListener(e,t,n)}r.addEventListener(e,t,n)};r.getDimension=function A(e){var t;if(!n.isOldIE()&&e.getBoundingClientRect){t=e.getBoundingClientRect();return{width:t.width,height:t.height}}return{width:e.offsetWidth,height:e.offsetHeight}};t.exports=r},{"./utilityFunctions":48}],44:[function(e,t,i){"use strict";var n=e("./urlUtils");var r=e("./utilityFunctions");function a(e){this.message="HttpRequest Error: "+(e||"")}a.prototype=new Error;a.prototype.name="HttpRequest Error";function s(e){if(!r.isFunction(e)){throw new a("Missing XMLHttpRequest factory method")}this.createXhr=e}s.prototype.run=function(e,t,i,s){c(t,i,s);var o,u;var l=this.createXhr();s=s||{};o=r.isNumber(s.timeout)?s.timeout:0;l.open(e,n.urlParts(t).href,true);if(s.headers){d(l,s.headers)}if(s.withCredentials){l.withCredentials=true}l.onload=function(){var e,t,n;if(!l.getAllResponseHeaders){l.getAllResponseHeaders=function(){return null}}if(!l.status){l.status=200}if(r.isDefined(u)){clearTimeout(u);u=undefined}e=l.statusText||"";t="response"in l?l.response:l.responseText;n=l.status===1223?204:l.status;i(n,t,l.getAllResponseHeaders(),e)};l.onerror=f;l.onabort=f;l.send();if(o>0){u=setTimeout(function(){l&&l.abort()},o)}function c(e,t,i){if(!r.isString(e)||r.isEmptyString(e)){throw new a("Invalid url '"+e+"'")}if(!r.isFunction(t)){throw new a("Invalid handler '"+t+"' for the http request")}if(r.isDefined(i)&&!r.isObject(i)){throw new a("Invalid options map '"+i+"'")}}function d(e,t){r.forEach(t,function(t,i){if(r.isDefined(t)){e.setRequestHeader(i,t)}})}function f(){i(-1,null,null,"")}};s.prototype.get=function(e,t,i){this.run("GET",e,n,i);function n(e,i,n,s){if(r(e)){t(null,i,e,n,s)}else{t(new a(s),i,e,n,s)}}function r(e){return 200<=e&&e<300}};function o(){var e=new XMLHttpRequest;if(!("withCredentials"in e)){e=new XDomainRequest}return e}var u=new s(o);t.exports={http:u,HttpRequest:s,HttpRequestError:a,createXhr:o}},{"./urlUtils":47,"./utilityFunctions":48}],45:[function(e,t,i){"use strict";t.exports={html5:["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],flash:["application/x-shockwave-flash"]}},{}],46:[function(e,t,i){"use strict";var n=e("./dom");var r=e("./utilityFunctions");var a={};a.getPlayerSnapshot=function s(e){var t=e.el().querySelector(".vjs-tech");var i={ended:e.ended(),src:e.currentSrc(),currentTime:e.currentTime(),type:e.currentType(),playing:!e.paused(),suppressedTracks:n(e)};if(t){i.nativePoster=t.poster;i.style=t.getAttribute("style")}return i;function n(e){var t=e.remoteTextTracks?e.remoteTextTracks():[];if(t&&r.isArray(t.tracks_)){t=t.tracks_}if(!r.isArray(t)){t=[]}var i=[];t.forEach(function(e){i.push({track:e,mode:e.mode});e.mode="disabled"});return i}};a.restorePlayerSnapshot=function o(e,t){var i=e.el().querySelector(".vjs-tech");var n=20;if(t.nativePoster){i.poster=t.nativePoster}if("style"in t){i.setAttribute("style",t.style||"")}if(s(e,t)){e.one("contentloadedmetadata",o);e.one("canplay",u);r();e.src({src:t.src,type:t.type});e.load()}else{o();if(t.playing){e.play()}}function r(){var t=setTimeout(function(){e.trigger("canplay")},1e3);e.one("canplay",function(){clearTimeout(t)})}function s(e,t){if(e.src()){return e.src()!==t.src}return e.currentSrc()!==t.src}function o(){var e=t.suppressedTracks;e.forEach(function(e){e.track.mode=e.mode})}function u(){if(!a.isReadyToResume(e)&&n--){setTimeout(u,50)}else{try{if(e.currentTime()!==t.currentTime){if(t.playing){e.one("seeked",function(){e.play()})}e.currentTime(t.currentTime)}else if(t.playing){e.play()}}catch(i){videojs.log.warn("Failed to resume the content after an advertisement",i)}}}};a.isReadyToResume=function(e){if(e.readyState()>1){return true}if(e.seekable()===undefined){return true}if(e.seekable().length>0){return true}return false};a.prepareForAds=function(e){var t=e.addChild("blackPoster");var i=true;var a;s();e.on("play",u);e.on("vast.reset",l);e.on("vast.firstPlay",f);e.on("error",p);e.on("vast.adStart",p);e.on("vast.adsCancel",p);e.on("vast.adError",p);e.on("vast.adStart",v);e.on("vast.adEnd",g);e.on("vast.adsCancel",g);function s(){var t=e.play;e.play=function(i){var n=this;if(c()){s()}else{u(i)}return this;function s(){if(!r.isIPhone()){a=d();e.muted(true)}t.apply(n,arguments)}function u(i){if(o()&&!i){e.vast.adUnit.resumeAd()}else{t.apply(n,arguments)}}};var i=e.pause;e.pause=function(t){if(o()&&!t){e.vast.adUnit.pauseAd()}else{i.apply(this,arguments)}return this};var n=e.paused;e.paused=function(t){if(o()&&!t){return e.vast.adUnit.isPaused()}return n.apply(this,arguments)}}function o(){return e.vast&&e.vast.adUnit}function u(){if(c()){i=false;e.trigger("vast.firstPlay")}}function l(){i=true;t.show();f()}function c(){return i}function d(){return{muted:e.muted(),volume:e.volume()}}function f(){if(a){e.currentTime(0);h(a);a=null}}function h(t){if(r.isObject(t)){e.volume(t.volume);e.muted(t.muted)}}function p(){if(!n.hasClass(t.el(),"vjs-hidden")){t.hide()}}function v(){n.addClass(e.el(),"vjs-ad-playing")}function g(){n.removeClass(e.el(),"vjs-ad-playing")}};a.removeNativePoster=function(e){var t=e.el().querySelector(".vjs-tech");if(t){t.removeAttribute("poster")}};a.once=function u(e,t,i){function n(){i.apply(null,arguments);t.forEach(function(t){e.off(t,n)})}t.forEach(function(t){e.on(t,n)})};t.exports=a},{"./dom":43,"./utilityFunctions":48}],47:[function(e,t,i){"use strict";var n=e("./utilityFunctions");var r=document.createElement("a");var a=document.documentMode;function s(e){var t=e;if(a){r.setAttribute("href",t);t=r.href}r.setAttribute("href",t);return{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:n.isNotEmptyString(r.port)?r.port:80,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}function o(e,t){var i,r;t=n.isFunction(t)?t:function(){return true};e=e.trim().replace(/^\?/,"");i=e.split("&");r={};n.forEach(i,function(e){var i,n,a;if(e!==""){i=e.split("=");n=i[0];a=i[1];if(t(n,a)){r[n]=a}}});return r}function u(e){var t=[];n.forEach(e,function(e,i){t.push(i+"="+e)});return t.join("&")}t.exports={urlParts:s,queryStringToObj:o,objToQueryString:u}},{"./utilityFunctions":48}],48:[function(e,t,i){"use strict";var n=1;var r=/[A-Z]/g;var a=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i;var s=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;function o(){}function u(e){return e===null}function l(e){return typeof e==="boolean"}function c(e){return e!==undefined}function d(e){return e===undefined}function f(e){return typeof e==="object"}function h(e){return typeof e==="function"}function p(e){return typeof e==="number"}function v(e){return H.isObject(e)&&e.window===e}function g(e){return Object.prototype.toString.call(e)==="[object Array]"}function y(e){if(e===null||H.isWindow(e)||H.isFunction(e)||H.isUndefined(e)){return false}var t=e.length;if(e.nodeType===n&&t){return true}return H.isString(e)||H.isArray(e)||t===0||typeof t==="number"&&t>0&&t-1 in e}function m(e){return typeof e==="string"}function A(e){return H.isString(e)&&e.length===0}function k(e){return H.isString(e)&&e.length!==0}function _(e){return Array.prototype.slice.call(e)}function w(e,t,i){var n,r;if(e){if(h(e)){for(n in e){if(n!=="prototype"&&n!=="length"&&n!=="name"&&(!e.hasOwnProperty||e.hasOwnProperty(n))){t.call(i,e[n],n,e)}}}else if(g(e)){var a=typeof e!=="object";for(n=0,r=e.length;n<r;n++){if(a||n in e){t.call(i,e[n],n,e)}}}else if(e.forEach&&e.forEach!==w){e.forEach(t,i,e)}else{for(n in e){if(e.hasOwnProperty(n)){t.call(i,e[n],n,e)}}}}return e}function T(e,t){t=t||"_";return e.replace(r,function(e,i){return(i?t:"")+e.toLowerCase()})}function b(e){if(!H.isString(e)){return false}return a.test(e.trim())}function E(e){var t,i,n;for(i=1;i<arguments.length;i++){t=arguments[i];for(n in t){if(t.hasOwnProperty(n)){if(f(e[n])&&!u(e[n])&&f(t[n])&&!g(t[n])){e[n]=E({},e[n],t[n])}else{e[n]=t[n]}}}}return e}function S(e){return e.charAt(0).toUpperCase()+e.slice(1)}function V(e){return e.charAt(0).toLowerCase()+e.slice(1)}function C(e,t){var i=[];e.forEach(function(e,n){var r=t(e,n);if(H.isDefined(r)){i.push(r)}});return i}function I(e,t){var i=e+"";t=H.isNumber(t)?t:0;e=H.isNumber(e)?e:parseInt(e,10);if(H.isNumber(e)&&!isNaN(e)){i=e+"";while(i.length<t){i="0"+i}return i}return NaN+""}function L(e,t){var i=(new Date).getTime()-(t+1);return function(){var n=(new Date).getTime();if(n-i>=t){i=n;e.apply(this,arguments)}}}function F(e,t){var i;return function(){if(i){clearTimeout(i)}i=setTimeout(function(){e.apply(this,arguments);i=undefined},t)}}function U(e,t,i){var n=t(e);for(var r=0;r<n.length;r++){if(i(n[r])){return n[r]}else{var a=U(n[r],t,i);if(a){return a}}}}function P(e){return function(){return e}}function D(e){if(H.isNumber(e)){e=e+""}if(!H.isString(e)){return false}return s.test(e.trim())}function x(){var e=H.getInternetExplorerVersion(navigator);if(e===-1){return false}return e<10}function M(e){var t=-1;if(e.appName=="Microsoft Internet Explorer"){var i=e.userAgent;var n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");var r=n.exec(i);if(r!==null){t=parseFloat(r[1])}}return t}function R(){return/iP(hone|ad)/.test(H._UA)}function N(){return/iP(hone|ad|od)|Android|Windows Phone/.test(H._UA)}function O(){return/iP(hone|od)/.test(H._UA)}function j(){return/Android/.test(H._UA)}var H={_UA:navigator.userAgent,noop:o,isNull:u,isBool:l,isDefined:c,isUndefined:d,isObject:f,isFunction:h,isNumber:p,isWindow:v,isArray:g,isArrayLike:y,isString:m,isEmptyString:A,isNotEmptyString:k,arrayLikeObjToArray:_,forEach:w,snake_case:T,isValidEmail:b,extend:E,capitalize:S,decapitalize:V,transformArray:C,toFixedDigits:I,throttle:L,debounce:F,treeSearch:U,echoFn:P,isISO8601:D,isOldIE:x,getInternetExplorerVersion:M,isIDevice:R,isMobile:N,isIPhone:O,isAndroid:j};t.exports=H},{}],49:[function(e,t,i){"use strict";var n=e("./utilityFunctions");var r={};r.strToXMLDoc=function a(e){if(typeof window.DOMParser==="undefined"){var t=new ActiveXObject("Microsoft.XMLDOM");t.async=false;t.loadXML(e);return t}return i(e);function i(e){var t=new DOMParser;var i;try{i=t.parseFromString(e,"application/xml");if(r(i)||n.isEmptyString(e)){throw new Error}}catch(a){throw new Error("xml.strToXMLDOC: Error parsing the string: '"+e+"'")}return i}function r(e){try{var t=new DOMParser,i=t.parseFromString("INVALID","text/xml"),n=i.getElementsByTagName("parsererror")[0].namespaceURI;if(n==="http://www.w3.org/1999/xhtml"){return e.getElementsByTagName("parsererror").length>0}return e.getElementsByTagNameNS(n,"parsererror").length>0}catch(r){}}};r.parseText=function s(e){if(/^\s*$/.test(e)){return null}if(/^(?:true|false)$/i.test(e)){return e.toLowerCase()==="true"}if(isFinite(e)){return parseFloat(e)}if(n.isISO8601(e)){return new Date(e)}return e.trim()};r.JXONTree=function o(e){var t=r.parseText;if(e.documentElement){return new r.JXONTree(e.documentElement)}if(e.hasChildNodes()){var i="";for(var a,s,o,u=0;u<e.childNodes.length;u++){a=e.childNodes.item(u);if((a.nodeType-1|1)===3){i+=a.nodeType===3?a.nodeValue.trim():a.nodeValue}else if(a.nodeType===1&&!a.prefix){s=n.decapitalize(a.nodeName);o=new r.JXONTree(a);if(this.hasOwnProperty(s)){if(this[s].constructor!==Array){this[s]=[this[s]]}this[s].push(o)}else{this[s]=o}}}if(i){this.keyValue=t(i)}}var l=typeof e.hasAttributes==="undefined"?e.attributes.length>0:e.hasAttributes();if(l){var c;for(var d=0;d<e.attributes.length;d++){c=e.attributes.item(d);this["@"+n.decapitalize(c.name)]=t(c.value.trim())}}};r.JXONTree.prototype.attr=function(e){return this["@"+n.decapitalize(e)]};r.toJXONTree=function u(e){var t=r.strToXMLDoc(e);return new r.JXONTree(t)};r.keyValue=function l(e){if(e){return e.keyValue}return undefined};r.attr=function c(e,t){if(e){return e["@"+n.decapitalize(t)]}return undefined};r.encode=function d(e){if(!n.isString(e))return undefined;return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};r.decode=function f(e){if(!n.isString(e))return undefined;return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};t.exports=r},{"./utilityFunctions":48}],50:[function(e,t,i){"use strict";e("./plugin/components/ads-label_4");e("./plugin/components/black-poster_4");var n=e("./plugin/videojs.vast.vpaid");videojs.plugin("vastClient",n)},{"./plugin/components/ads-label_4":37,"./plugin/components/black-poster_4":39,"./plugin/videojs.vast.vpaid":40}]},{},[50]);
//# sourceMappingURL=videojs_4.vast.vpaid.min.js.map
